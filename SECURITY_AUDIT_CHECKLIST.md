# SocioMint å®‰å…¨å®¡è®¡æ£€æŸ¥æ¸…å•

## ğŸ›¡ï¸ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº† SocioMint é¡¹ç›®çš„å®Œæ•´å®‰å…¨å®¡è®¡æ£€æŸ¥æ¸…å•ï¼Œæ¶µç›–æ™ºèƒ½åˆçº¦ã€å‰ç«¯åº”ç”¨ã€åç«¯æœåŠ¡å’ŒåŸºç¡€è®¾æ–½çš„å®‰å…¨è¦æ±‚ã€‚

## ğŸ“‹ æ™ºèƒ½åˆçº¦å®‰å…¨æ£€æŸ¥

### âœ… åŸºç¡€å®‰å…¨æœºåˆ¶

#### é‡å…¥æ”»å‡»é˜²æŠ¤
- [ ] æ‰€æœ‰çŠ¶æ€å˜æ›´å‡½æ•°ä½¿ç”¨ `ReentrancyGuard`
- [ ] å¤–éƒ¨è°ƒç”¨éµå¾ª "æ£€æŸ¥-æ•ˆæœ-äº¤äº’" æ¨¡å¼
- [ ] å…³é”®å‡½æ•°ä½¿ç”¨ `nonReentrant` ä¿®é¥°ç¬¦

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
function depositFlowers(uint256 amount) external nonReentrant {
    require(amount > 0, "Amount must be positive");
    // æ£€æŸ¥
    require(redFlowerToken.balanceOf(msg.sender) >= amount, "Insufficient balance");
    
    // æ•ˆæœ
    userDeposits[msg.sender][currentRoundId].amount += amount;
    currentRound.totalDeposits += amount;
    
    // äº¤äº’
    redFlowerToken.transferFrom(msg.sender, address(this), amount);
}
```

#### è®¿é—®æ§åˆ¶
- [ ] ä½¿ç”¨ `Ownable` æˆ– `AccessControl` è¿›è¡Œæƒé™ç®¡ç†
- [ ] å…³é”®å‡½æ•°æœ‰é€‚å½“çš„æƒé™ä¿®é¥°ç¬¦
- [ ] æƒé™è½¬ç§»æœ‰å®‰å…¨æœºåˆ¶

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
function distributeRewards(uint256 roundId) external onlyOwner {
    require(!rounds[roundId].distributed, "Already distributed");
    // åˆ†é…é€»è¾‘
}
```

#### æš‚åœæœºåˆ¶
- [ ] å®ç° `Pausable` åˆçº¦
- [ ] ç´§æ€¥æƒ…å†µä¸‹å¯æš‚åœå…³é”®åŠŸèƒ½
- [ ] æš‚åœçŠ¶æ€ä¸‹çš„èµ„é‡‘å®‰å…¨

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
function depositFlowers(uint256 amount) external whenNotPaused nonReentrant {
    // å­˜æ¬¾é€»è¾‘
}
```

### âœ… æ•°å€¼å®‰å…¨

#### æ•´æ•°æº¢å‡º/ä¸‹æº¢
- [ ] ä½¿ç”¨ Solidity 0.8+ å†…ç½®æº¢å‡ºæ£€æŸ¥
- [ ] å…³é”®è®¡ç®—ä½¿ç”¨ SafeMathï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] è¾¹ç•Œå€¼æµ‹è¯•è¦†ç›–

#### ç²¾åº¦æŸå¤±
- [ ] é™¤æ³•è¿ç®—è€ƒè™‘ç²¾åº¦æŸå¤±
- [ ] ä½¿ç”¨é€‚å½“çš„å°æ•°ä½æ•°
- [ ] å››èˆäº”å…¥é€»è¾‘æ­£ç¡®

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
function calculateReward(uint256 userDeposit, uint256 totalDeposits, uint256 totalRewards) 
    public pure returns (uint256) {
    if (totalDeposits == 0) return 0;
    return (userDeposit * totalRewards) / totalDeposits;
}
```

### âœ… çŠ¶æ€ç®¡ç†

#### çŠ¶æ€ä¸€è‡´æ€§
- [ ] çŠ¶æ€å˜æ›´çš„åŸå­æ€§
- [ ] é¿å…çŠ¶æ€ç«äº‰æ¡ä»¶
- [ ] çŠ¶æ€å›æ»šæœºåˆ¶

#### æ—¶é—´ä¾èµ–
- [ ] é¿å…ä¾èµ– `block.timestamp` è¿›è¡Œå…³é”®é€»è¾‘
- [ ] æ—¶é—´çª—å£æ”»å‡»é˜²æŠ¤
- [ ] åŒºå—æ—¶é—´å˜åŒ–å®¹å¿åº¦

### âœ… å¤–éƒ¨è°ƒç”¨å®‰å…¨

#### ä»£å¸äº¤äº’
- [ ] ERC20 ä»£å¸è½¬è´¦è¿”å›å€¼æ£€æŸ¥
- [ ] ä½¿ç”¨ `safeTransfer` å’Œ `safeTransferFrom`
- [ ] ä»£å¸åˆçº¦åœ°å€éªŒè¯

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
import "@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol";

using SafeERC20 for IERC20;

function claimReward(uint256 roundId) external {
    uint256 reward = calculateUserReward(msg.sender, roundId);
    smToken.safeTransfer(msg.sender, reward);
}
```

#### é¢„è¨€æœºå®‰å…¨
- [ ] ä»·æ ¼é¢„è¨€æœºæ•°æ®éªŒè¯
- [ ] å¤šä¸ªæ•°æ®æºäº¤å‰éªŒè¯
- [ ] ä»·æ ¼æ“çºµæ”»å‡»é˜²æŠ¤

### âœ… å‡çº§å®‰å…¨

#### ä»£ç†æ¨¡å¼
- [ ] ä½¿ç”¨ OpenZeppelin UUPS ä»£ç†
- [ ] å‡çº§æƒé™ä¸¥æ ¼æ§åˆ¶
- [ ] å­˜å‚¨å¸ƒå±€å…¼å®¹æ€§

```solidity
// âœ… æ­£ç¡®ç¤ºä¾‹
contract AirdropPool is 
    Initializable, 
    UUPSUpgradeable, 
    OwnableUpgradeable 
{
    function _authorizeUpgrade(address newImplementation) 
        internal override onlyOwner {}
}
```

## ğŸ”’ å‰ç«¯åº”ç”¨å®‰å…¨æ£€æŸ¥

### âœ… é’±åŒ…é›†æˆå®‰å…¨

#### ç­¾åéªŒè¯
- [ ] æ¶ˆæ¯ç­¾åæ ¼å¼æ ‡å‡†åŒ–
- [ ] ç­¾åé‡æ”¾æ”»å‡»é˜²æŠ¤
- [ ] ç­¾åæœ‰æ•ˆæœŸé™åˆ¶

```typescript
// âœ… æ­£ç¡®ç¤ºä¾‹
const message = `SocioMint Login\nNonce: ${nonce}\nTimestamp: ${timestamp}`;
const signature = await signer.signMessage(message);
```

#### ç§é’¥ä¿æŠ¤
- [ ] ç§é’¥ä¸åœ¨å‰ç«¯å­˜å‚¨
- [ ] ä½¿ç”¨é’±åŒ…æä¾›çš„ç­¾åæ–¹æ³•
- [ ] æ•æ„Ÿæ“ä½œäºŒæ¬¡ç¡®è®¤

### âœ… API å®‰å…¨

#### è¾“å…¥éªŒè¯
- [ ] æ‰€æœ‰ç”¨æˆ·è¾“å…¥ä¸¥æ ¼éªŒè¯
- [ ] SQL æ³¨å…¥é˜²æŠ¤
- [ ] XSS æ”»å‡»é˜²æŠ¤

```typescript
// âœ… æ­£ç¡®ç¤ºä¾‹
function validateWalletAddress(address: string): boolean {
    return /^0x[a-fA-F0-9]{40}$/.test(address);
}
```

#### è®¤è¯æˆæƒ
- [ ] JWT ä»¤ç‰Œå®‰å…¨å®ç°
- [ ] ä»¤ç‰Œè¿‡æœŸæ—¶é—´åˆç†
- [ ] åˆ·æ–°ä»¤ç‰Œæœºåˆ¶

#### é€Ÿç‡é™åˆ¶
- [ ] API è°ƒç”¨é¢‘ç‡é™åˆ¶
- [ ] é˜²æ­¢æš´åŠ›ç ´è§£
- [ ] DDoS æ”»å‡»é˜²æŠ¤

### âœ… æ•°æ®å®‰å…¨

#### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- [ ] ä¼ è¾“è¿‡ç¨‹ HTTPS åŠ å¯†
- [ ] æ—¥å¿—ä¸­ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯

#### ä¼šè¯ç®¡ç†
- [ ] ä¼šè¯ä»¤ç‰Œå®‰å…¨ç”Ÿæˆ
- [ ] ä¼šè¯è¶…æ—¶æœºåˆ¶
- [ ] ç™»å‡ºæ—¶æ¸…ç†ä¼šè¯

## ğŸ—„ï¸ æ•°æ®åº“å®‰å…¨æ£€æŸ¥

### âœ… Supabase å®‰å…¨é…ç½®

#### è¡Œçº§å®‰å…¨ (RLS)
- [ ] æ‰€æœ‰è¡¨å¯ç”¨ RLS
- [ ] ç­–ç•¥è¦†ç›–æ‰€æœ‰æ“ä½œç±»å‹
- [ ] ç­–ç•¥é€»è¾‘æ­£ç¡®æ€§éªŒè¯

```sql
-- âœ… æ­£ç¡®ç¤ºä¾‹
CREATE POLICY "users_own_data" ON user_profiles
    FOR ALL USING (auth.uid()::text = wallet_address);
```

#### æ•°æ®è®¿é—®æ§åˆ¶
- [ ] æœåŠ¡è§’è‰²æƒé™æœ€å°åŒ–
- [ ] åŒ¿åè®¿é—®ä¸¥æ ¼é™åˆ¶
- [ ] æ•æ„Ÿè¡¨é¢å¤–ä¿æŠ¤

#### æ•°æ®å¤‡ä»½
- [ ] å®šæœŸè‡ªåŠ¨å¤‡ä»½
- [ ] å¤‡ä»½æ•°æ®åŠ å¯†
- [ ] æ¢å¤æµç¨‹æµ‹è¯•

### âœ… SQL æ³¨å…¥é˜²æŠ¤

#### å‚æ•°åŒ–æŸ¥è¯¢
- [ ] æ‰€æœ‰æŸ¥è¯¢ä½¿ç”¨å‚æ•°åŒ–
- [ ] åŠ¨æ€ SQL ä¸¥æ ¼éªŒè¯
- [ ] å­˜å‚¨è¿‡ç¨‹å®‰å…¨å®ç°

```typescript
// âœ… æ­£ç¡®ç¤ºä¾‹
const { data } = await supabase
    .from('user_actions')
    .select('*')
    .eq('user_wallet', walletAddress)
    .eq('platform', platform);
```

## ğŸŒ ç½‘ç»œå®‰å…¨æ£€æŸ¥

### âœ… HTTPS é…ç½®

#### SSL/TLS è®¾ç½®
- [ ] å¼ºåˆ¶ HTTPS é‡å®šå‘
- [ ] TLS 1.2+ ç‰ˆæœ¬è¦æ±‚
- [ ] è¯ä¹¦æœ‰æ•ˆæ€§æ£€æŸ¥

#### å®‰å…¨å¤´è®¾ç½®
- [ ] Content Security Policy (CSP)
- [ ] X-Frame-Options
- [ ] X-Content-Type-Options
- [ ] Strict-Transport-Security

```javascript
// âœ… æ­£ç¡®ç¤ºä¾‹ - Next.js é…ç½®
const securityHeaders = [
    {
        key: 'Content-Security-Policy',
        value: "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'"
    },
    {
        key: 'X-Frame-Options',
        value: 'DENY'
    }
];
```

### âœ… API å®‰å…¨

#### CORS é…ç½®
- [ ] ä¸¥æ ¼çš„ CORS ç­–ç•¥
- [ ] å…è®¸çš„åŸŸåç™½åå•
- [ ] é¢„æ£€è¯·æ±‚å¤„ç†

#### è¯·æ±‚éªŒè¯
- [ ] è¯·æ±‚å¤§å°é™åˆ¶
- [ ] è¯·æ±‚é¢‘ç‡é™åˆ¶
- [ ] æ¶æ„è¯·æ±‚æ£€æµ‹

## ğŸ”§ åŸºç¡€è®¾æ–½å®‰å…¨æ£€æŸ¥

### âœ… ç¯å¢ƒå˜é‡ç®¡ç†

#### æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- [ ] ç§é’¥å®‰å…¨å­˜å‚¨
- [ ] API å¯†é’¥è½®æ¢æœºåˆ¶
- [ ] ç¯å¢ƒéš”ç¦»

```bash
# âœ… æ­£ç¡®ç¤ºä¾‹ - ç¯å¢ƒå˜é‡å‘½å
BSC_MAINNET_PRIVATE_KEY=0x...
SUPABASE_SERVICE_ROLE_KEY=eyJ...
TWITTER_CLIENT_SECRET=...
```

#### è®¿é—®æ§åˆ¶
- [ ] æœ€å°æƒé™åŸåˆ™
- [ ] å®šæœŸæƒé™å®¡è®¡
- [ ] è®¿é—®æ—¥å¿—è®°å½•

### âœ… éƒ¨ç½²å®‰å…¨

#### CI/CD å®‰å…¨
- [ ] æ„å»ºç¯å¢ƒéš”ç¦»
- [ ] ä¾èµ–é¡¹å®‰å…¨æ‰«æ
- [ ] éƒ¨ç½²æµç¨‹å®¡è®¡

#### å®¹å™¨å®‰å…¨
- [ ] åŸºç¡€é•œåƒå®‰å…¨
- [ ] è¿è¡Œæ—¶æƒé™æœ€å°åŒ–
- [ ] å®¹å™¨æ‰«æ

## ğŸ§ª å®‰å…¨æµ‹è¯•

### âœ… è‡ªåŠ¨åŒ–å®‰å…¨æ‰«æ

#### æ™ºèƒ½åˆçº¦æ‰«æ
```bash
# Slither é™æ€åˆ†æ
slither contracts/

# MythX å®‰å…¨åˆ†æ
mythx analyze contracts/AirdropPool.sol

# Echidna æ¨¡ç³Šæµ‹è¯•
echidna-test contracts/AirdropPool.sol
```

#### ä¾èµ–é¡¹æ‰«æ
```bash
# npm å®‰å…¨å®¡è®¡
npm audit

# Snyk æ¼æ´æ‰«æ
snyk test

# OWASP ä¾èµ–æ£€æŸ¥
dependency-check --project SocioMint --scan .
```

### âœ… æ¸—é€æµ‹è¯•

#### Web åº”ç”¨æµ‹è¯•
- [ ] OWASP Top 10 æ¼æ´æ£€æŸ¥
- [ ] è®¤è¯ç»•è¿‡æµ‹è¯•
- [ ] æƒé™æå‡æµ‹è¯•

#### API æµ‹è¯•
- [ ] ç«¯ç‚¹æšä¸¾
- [ ] å‚æ•°æ±¡æŸ“
- [ ] ä¸šåŠ¡é€»è¾‘æ¼æ´

## ğŸ“Š å®‰å…¨ç›‘æ§

### âœ… å®æ—¶ç›‘æ§

#### å¼‚å¸¸æ£€æµ‹
- [ ] å¼‚å¸¸äº¤æ˜“ç›‘æ§
- [ ] å¤§é¢è½¬è´¦å‘Šè­¦
- [ ] é¢‘ç¹æ“ä½œæ£€æµ‹

#### æ—¥å¿—åˆ†æ
- [ ] å®‰å…¨äº‹ä»¶æ—¥å¿—
- [ ] è®¿é—®æ¨¡å¼åˆ†æ
- [ ] å¨èƒæƒ…æŠ¥é›†æˆ

### âœ… äº‹ä»¶å“åº”

#### åº”æ€¥é¢„æ¡ˆ
- [ ] å®‰å…¨äº‹ä»¶å“åº”æµç¨‹
- [ ] ç´§æ€¥è”ç³»äººåˆ—è¡¨
- [ ] ç³»ç»Ÿæ¢å¤ç¨‹åº

#### é€šçŸ¥æœºåˆ¶
- [ ] å®æ—¶å‘Šè­¦ç³»ç»Ÿ
- [ ] å¤šæ¸ é“é€šçŸ¥
- [ ] å‡çº§æœºåˆ¶

## ğŸ¯ å®‰å…¨è¯„åˆ†

### è¯„åˆ†æ ‡å‡†

| ç±»åˆ« | æƒé‡ | æ£€æŸ¥é¡¹ | å¾—åˆ† |
|------|------|--------|------|
| æ™ºèƒ½åˆçº¦å®‰å…¨ | 30% | 20é¡¹ | __/20 |
| å‰ç«¯åº”ç”¨å®‰å…¨ | 25% | 15é¡¹ | __/15 |
| æ•°æ®åº“å®‰å…¨ | 20% | 12é¡¹ | __/12 |
| ç½‘ç»œå®‰å…¨ | 15% | 10é¡¹ | __/10 |
| åŸºç¡€è®¾æ–½å®‰å…¨ | 10% | 8é¡¹ | __/8 |

### å®‰å…¨ç­‰çº§

- **Açº§ (90-100%)**: ç”Ÿäº§å°±ç»ªï¼Œå®‰å…¨æ€§ä¼˜ç§€
- **Bçº§ (80-89%)**: åŸºæœ¬å®‰å…¨ï¼Œéœ€è¦å°å¹…æ”¹è¿›
- **Cçº§ (70-79%)**: å­˜åœ¨é£é™©ï¼Œéœ€è¦é‡è¦æ”¹è¿›
- **Dçº§ (<70%)**: é«˜é£é™©ï¼Œä¸å»ºè®®ä¸Šçº¿

## ğŸ“ å®¡è®¡æŠ¥å‘Šæ¨¡æ¿

### æ‰§è¡Œæ‘˜è¦
- å®¡è®¡èŒƒå›´å’Œç›®æ ‡
- å‘ç°çš„ä¸»è¦é—®é¢˜
- é£é™©è¯„ä¼°ç»“æœ
- ä¿®å¤å»ºè®®ä¼˜å…ˆçº§

### è¯¦ç»†å‘ç°
- æ¼æ´æè¿°
- å½±å“è¯„ä¼°
- å¤ç°æ­¥éª¤
- ä¿®å¤å»ºè®®

### åˆè§„æ€§æ£€æŸ¥
- æ³•å¾‹æ³•è§„éµå¾ª
- è¡Œä¸šæ ‡å‡†ç¬¦åˆ
- æœ€ä½³å®è·µåº”ç”¨

## ğŸ”„ æŒç»­å®‰å…¨æ”¹è¿›

### å®šæœŸå®¡è®¡
- [ ] æœˆåº¦å®‰å…¨æ£€æŸ¥
- [ ] å­£åº¦æ·±åº¦å®¡è®¡
- [ ] å¹´åº¦ç¬¬ä¸‰æ–¹å®¡è®¡

### å®‰å…¨åŸ¹è®­
- [ ] å¼€å‘å›¢é˜Ÿå®‰å…¨åŸ¹è®­
- [ ] å®‰å…¨æ„è¯†æå‡
- [ ] æœ€æ–°å¨èƒæƒ…æŠ¥

### æŠ€æœ¯æ›´æ–°
- [ ] ä¾èµ–é¡¹å®šæœŸæ›´æ–°
- [ ] å®‰å…¨è¡¥ä¸åŠæ—¶åº”ç”¨
- [ ] æ–°æŠ€æœ¯å®‰å…¨è¯„ä¼°

---

**é‡è¦æé†’**: å®‰å…¨æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦å®šæœŸè¯„ä¼°å’Œæ”¹è¿›ã€‚å»ºè®®åœ¨ä¸»ç½‘éƒ¨ç½²å‰è¿›è¡Œä¸“ä¸šçš„ç¬¬ä¸‰æ–¹å®‰å…¨å®¡è®¡ã€‚
