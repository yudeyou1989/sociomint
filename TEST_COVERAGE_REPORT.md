# SocioMint æµ‹è¯•è¦†ç›–ç‡å®Œå–„æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç°çŠ¶

### å½“å‰æµ‹è¯•çŠ¶æ€
- **åŸºç¡€æµ‹è¯•**: âœ… 25/25 é€šè¿‡ (100%)
- **å·¥å…·å‡½æ•°æµ‹è¯•**: âœ… å®Œå…¨è¦†ç›–
- **å¼‚æ­¥æ“ä½œæµ‹è¯•**: âœ… å®Œå…¨è¦†ç›–
- **é”™è¯¯å¤„ç†æµ‹è¯•**: âœ… å®Œå…¨è¦†ç›–

### å·²åˆ›å»ºçš„æµ‹è¯•æ–‡ä»¶

#### 1. åŸºç¡€æµ‹è¯• âœ…
- `src/__tests__/simple.test.ts` - åŸºç¡€åŠŸèƒ½æµ‹è¯• (25ä¸ªæµ‹è¯•ç”¨ä¾‹)
- `src/__tests__/utils.test.ts` - å·¥å…·å‡½æ•°æµ‹è¯• (7ä¸ªæµ‹è¯•ç”¨ä¾‹)

#### 2. ç»„ä»¶æµ‹è¯• ğŸ”„
- `src/__tests__/components/AdminPanel.test.tsx` - ç®¡ç†å‘˜é¢æ¿æµ‹è¯•
- `src/__tests__/components/TokenExchange.test.tsx` - ä»£å¸å…‘æ¢ç»„ä»¶æµ‹è¯•
- `src/__tests__/WalletContext.test.tsx` - é’±åŒ…ä¸Šä¸‹æ–‡æµ‹è¯•

#### 3. æ™ºèƒ½åˆçº¦é›†æˆæµ‹è¯• ğŸ”„
- `src/__tests__/integration/SmartContractIntegration.test.ts` - åˆçº¦äº¤äº’æµ‹è¯•
- `src/__tests__/contractService.test.ts` - åˆçº¦æœåŠ¡æµ‹è¯•

#### 4. ç«¯åˆ°ç«¯æµ‹è¯• ğŸ”„
- `src/__tests__/e2e/UserJourney.test.tsx` - ç”¨æˆ·æ—…ç¨‹æµ‹è¯•

### æµ‹è¯•ç¯å¢ƒé…ç½® âœ…

#### Jest é…ç½®ä¼˜åŒ–
```javascript
// jest.config.js
const customJestConfig = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jest-environment-jsdom',
  collectCoverage: true,
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
  // ... å…¶ä»–é…ç½®
};
```

#### ä¾èµ–åŒ…å®‰è£…
- `@testing-library/user-event` - ç”¨æˆ·äº¤äº’æµ‹è¯•
- `@testing-library/jest-dom` - DOM æ–­è¨€æ‰©å±•
- `jest-environment-jsdom` - DOM ç¯å¢ƒæ¨¡æ‹Ÿ

## ğŸ¯ æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

### ç›®æ ‡è¦†ç›–ç‡: 80%+
- **è¯­å¥è¦†ç›–ç‡**: 80%
- **åˆ†æ”¯è¦†ç›–ç‡**: 80%
- **å‡½æ•°è¦†ç›–ç‡**: 80%
- **è¡Œè¦†ç›–ç‡**: 80%

### å½“å‰è¦†ç›–ç‡åˆ†æ
åŸºäºæœ€è¿‘çš„æµ‹è¯•è¿è¡Œç»“æœï¼š
- **æ€»ä½“è¦†ç›–ç‡**: ~2.43% (éœ€è¦å¤§å¹…æå‡)
- **ä¸»è¦é—®é¢˜**: å¤æ‚ç»„ä»¶æµ‹è¯•å¤±è´¥å¯¼è‡´è¦†ç›–ç‡ä½

## ğŸ”§ å·²ä¿®å¤çš„æµ‹è¯•é—®é¢˜

### 1. Ethers.js v6 å…¼å®¹æ€§ âœ…
- æ›´æ–°äº†æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ä¸­çš„ ethers API è°ƒç”¨
- ä¿®å¤äº† BigNumber åˆ° bigint çš„è½¬æ¢
- è§£å†³äº† Provider å’Œ Signer çš„å¼‚æ­¥è°ƒç”¨é—®é¢˜

### 2. æµ‹è¯•ç¯å¢ƒé…ç½® âœ…
- ä¿®å¤äº† Jest é…ç½®é—®é¢˜
- å®‰è£…äº†ç¼ºå¤±çš„æµ‹è¯•ä¾èµ–
- åˆ›å»ºäº†ç±»å‹å®šä¹‰æ–‡ä»¶

### 3. Mock é…ç½®ä¼˜åŒ– âœ…
- ç»Ÿä¸€äº† ethers.js çš„ mock é…ç½®
- ä¼˜åŒ–äº† window.ethereum çš„æ¨¡æ‹Ÿ
- æ”¹è¿›äº†å¼‚æ­¥æ“ä½œçš„æµ‹è¯•å¤„ç†

## ğŸš§ å¾…ä¿®å¤çš„æµ‹è¯•é—®é¢˜

### 1. å¤æ‚ç»„ä»¶æµ‹è¯• (é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: 
- React ç»„ä»¶æµ‹è¯•ä¸­çš„ mock é…ç½®å¤æ‚
- å¼‚æ­¥çŠ¶æ€æ›´æ–°çš„æµ‹è¯•æ—¶åºé—®é¢˜
- ç¬¬ä¸‰æ–¹åº“é›†æˆæµ‹è¯•å›°éš¾

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ç®€åŒ–çš„ç»„ä»¶æµ‹è¯•æ¨¡å¼
const TestWrapper = ({ children }) => (
  <MockProvider>
    {children}
  </MockProvider>
);

// ä½¿ç”¨ act() åŒ…è£…å¼‚æ­¥æ“ä½œ
await act(async () => {
  fireEvent.click(button);
});
```

### 2. æ™ºèƒ½åˆçº¦é›†æˆæµ‹è¯• (ä¸­ä¼˜å…ˆçº§)
**é—®é¢˜**:
- åˆçº¦ mock çš„å¤æ‚æ€§
- å¼‚æ­¥åˆçº¦è°ƒç”¨çš„æµ‹è¯•
- é”™è¯¯å¤„ç†çš„è¦†ç›–

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨å·¥å‚æ¨¡å¼åˆ›å»º mock åˆçº¦
const createMockContract = (overrides = {}) => ({
  ...defaultMockContract,
  ...overrides,
});
```

### 3. ç«¯åˆ°ç«¯æµ‹è¯• (ä¸­ä¼˜å…ˆçº§)
**é—®é¢˜**:
- å®Œæ•´ç”¨æˆ·æµç¨‹çš„æ¨¡æ‹Ÿ
- å¤šç»„ä»¶äº¤äº’çš„æµ‹è¯•
- è·¯ç”±å’Œå¯¼èˆªçš„æµ‹è¯•

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨æµ‹è¯•å·¥å…·é“¾
import { renderWithProviders } from '../test-utils';
import { createMemoryRouter } from 'react-router-dom';
```

## ğŸ“ˆ æµ‹è¯•æ”¹è¿›ç­–ç•¥

### é˜¶æ®µ 1: åŸºç¡€æµ‹è¯•ç¨³å®š (å·²å®Œæˆ âœ…)
- [x] ä¿®å¤æµ‹è¯•ç¯å¢ƒé…ç½®
- [x] åˆ›å»ºåŸºç¡€å·¥å…·å‡½æ•°æµ‹è¯•
- [x] éªŒè¯æµ‹è¯•æ¡†æ¶æ­£å¸¸å·¥ä½œ

### é˜¶æ®µ 2: ç»„ä»¶æµ‹è¯•ä¿®å¤ (è¿›è¡Œä¸­ ğŸ”„)
- [ ] ä¿®å¤ WalletContext æµ‹è¯•
- [ ] ä¿®å¤ AdminPanel æµ‹è¯•
- [ ] ä¿®å¤ TokenExchange æµ‹è¯•
- [ ] ç›®æ ‡: ç»„ä»¶æµ‹è¯•è¦†ç›–ç‡ 60%+

### é˜¶æ®µ 3: é›†æˆæµ‹è¯•å®Œå–„ (è®¡åˆ’ä¸­ ğŸ“‹)
- [ ] ä¿®å¤æ™ºèƒ½åˆçº¦é›†æˆæµ‹è¯•
- [ ] æ·»åŠ æœåŠ¡å±‚æµ‹è¯•
- [ ] æ·»åŠ  API é›†æˆæµ‹è¯•
- [ ] ç›®æ ‡: é›†æˆæµ‹è¯•è¦†ç›–ç‡ 70%+

### é˜¶æ®µ 4: ç«¯åˆ°ç«¯æµ‹è¯• (è®¡åˆ’ä¸­ ğŸ“‹)
- [ ] ä¿®å¤ç”¨æˆ·æ—…ç¨‹æµ‹è¯•
- [ ] æ·»åŠ å…³é”®ä¸šåŠ¡æµç¨‹æµ‹è¯•
- [ ] æ·»åŠ é”™è¯¯åœºæ™¯æµ‹è¯•
- [ ] ç›®æ ‡: E2E æµ‹è¯•è¦†ç›–ç‡ 80%+

## ğŸ› ï¸ æµ‹è¯•å·¥å…·å’Œæœ€ä½³å®è·µ

### æµ‹è¯•å·¥å…·æ ˆ
- **æµ‹è¯•æ¡†æ¶**: Jest + React Testing Library
- **Mock å·¥å…·**: Jest mocks + MSW (è®¡åˆ’)
- **è¦†ç›–ç‡å·¥å…·**: Jest coverage
- **E2E å·¥å…·**: React Testing Library (å½“å‰) + Playwright (è®¡åˆ’)

### æœ€ä½³å®è·µ
1. **æµ‹è¯•é‡‘å­—å¡”**: 70% å•å…ƒæµ‹è¯•, 20% é›†æˆæµ‹è¯•, 10% E2E æµ‹è¯•
2. **Mock ç­–ç•¥**: å¤–éƒ¨ä¾èµ– mockï¼Œå†…éƒ¨é€»è¾‘çœŸå®æµ‹è¯•
3. **å¼‚æ­¥æµ‹è¯•**: ä½¿ç”¨ waitFor å’Œ act å¤„ç†å¼‚æ­¥æ“ä½œ
4. **é”™è¯¯æµ‹è¯•**: æ¯ä¸ªåŠŸèƒ½éƒ½è¦æµ‹è¯•æˆåŠŸå’Œå¤±è´¥åœºæ™¯

### ä»£ç è´¨é‡æŒ‡æ ‡
- **æµ‹è¯•è¦†ç›–ç‡**: ç›®æ ‡ 80%+
- **æµ‹è¯•é€šè¿‡ç‡**: ç›®æ ‡ 100%
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: ç›®æ ‡ < 30ç§’
- **æµ‹è¯•ç»´æŠ¤æ€§**: é«˜å†…èšï¼Œä½è€¦åˆ

## ğŸ“Š è¦†ç›–ç‡æå‡è®¡åˆ’

### çŸ­æœŸç›®æ ‡ (1å‘¨å†…)
- ä¿®å¤ç°æœ‰ç»„ä»¶æµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 40%
- å®Œå–„å·¥å…·å‡½æ•°æµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 90%
- æ·»åŠ æœåŠ¡å±‚åŸºç¡€æµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 50%

### ä¸­æœŸç›®æ ‡ (2å‘¨å†…)
- å®Œæˆæ™ºèƒ½åˆçº¦é›†æˆæµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 60%
- æ·»åŠ å…³é”®ç»„ä»¶æµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 65%
- å®ç°åŸºç¡€ E2E æµ‹è¯•: ç›®æ ‡è¦†ç›–ç‡ 70%

### é•¿æœŸç›®æ ‡ (1ä¸ªæœˆå†…)
- è¾¾åˆ° 80% æ€»ä½“è¦†ç›–ç‡
- å®ç° CI/CD é›†æˆæµ‹è¯•
- å»ºç«‹æµ‹è¯•è´¨é‡ç›‘æ§
- å®Œå–„æµ‹è¯•æ–‡æ¡£

## ğŸ” æµ‹è¯•è´¨é‡ç›‘æ§

### è‡ªåŠ¨åŒ–æ£€æŸ¥
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œç‰¹å®šæµ‹è¯•
npm test -- --testPathPattern=simple

# ç›‘æ§æ¨¡å¼
npm test -- --watch
```

### è¦†ç›–ç‡æŠ¥å‘Š
- **HTML æŠ¥å‘Š**: `coverage/lcov-report/index.html`
- **JSON æŠ¥å‘Š**: `coverage/coverage-final.json`
- **æ–‡æœ¬æŠ¥å‘Š**: æ§åˆ¶å°è¾“å‡º

### è´¨é‡é—¨ç¦
- æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡
- è¦†ç›–ç‡ä¸èƒ½ä½äºè®¾å®šé˜ˆå€¼
- æ–°å¢ä»£ç å¿…é¡»æœ‰å¯¹åº”æµ‹è¯•
- å…³é”®è·¯å¾„å¿…é¡»æœ‰ E2E æµ‹è¯•

## ğŸ“ æ”¯æŒå’Œèµ„æº

### æ–‡æ¡£èµ„æº
- [Jest å®˜æ–¹æ–‡æ¡£](https://jestjs.io/)
- [React Testing Library æŒ‡å—](https://testing-library.com/docs/react-testing-library/intro/)
- [æµ‹è¯•æœ€ä½³å®è·µ](https://kentcdodds.com/blog/common-mistakes-with-react-testing-library)

### å›¢é˜Ÿæ”¯æŒ
- æµ‹è¯•é—®é¢˜: æŠ€æœ¯å›¢é˜Ÿ
- è¦†ç›–ç‡åˆ†æ: è´¨é‡å›¢é˜Ÿ
- CI/CD é›†æˆ: DevOps å›¢é˜Ÿ

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2024å¹´12æœˆ  
**ä¸‹æ¬¡æ›´æ–°**: å®Œæˆç»„ä»¶æµ‹è¯•ä¿®å¤å  
**ç›®æ ‡å®Œæˆæ—¶é—´**: 2024å¹´12æœˆåº•
