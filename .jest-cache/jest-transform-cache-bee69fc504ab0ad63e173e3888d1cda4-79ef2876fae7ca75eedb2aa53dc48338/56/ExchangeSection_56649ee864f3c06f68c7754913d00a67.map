{"version":3,"names":["cov_1lhi54soxu","actualCoverage","s","ExchangeSection","props","b","f","stats","onExchange","isLoading","externalLoading","className","otherProps","wallet","updateBalances","_WalletContext","useWallet","inputAmount","setInputAmount","_react","useState","outputAmount","setOutputAmount","exchangeRate","setExchangeRate","isProcessing","setIsProcessing","useEffect","fetchExchangeRate","Promise","resolve","setTimeout","rate","Math","floor","random","error","console","interval","setInterval","document","visibilityState","clearInterval","calculateOutput","input","isNaN","Number","bnbAmount","parseFloat","smAmount","toFixed","handleInputChange","e","value","target","_security","InputValidator","validateNumber","numValue","validateRange","SecurityConfig","numberLimits","minAmount","maxAmount","handleExchange","isConnected","alert","currentBnbBalance","balance","bnb","handleMaxAmount","bnbBalance","max","_jsxruntime","jsxs","jsx","onClick","type","onChange","placeholder","disabled","sm","readOnly","FaGasPump","Fragment"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/components/home/ExchangeSection.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\n// // import { \"🔄\", FaGasPump } from 'react-icons/fa'; // 临时注释以修复构建 // 临时注释以修复构建\nimport { useWallet } from '@/contexts/WalletContext';\nimport { InputValidator, SecurityConfig } from '@/lib/security';\nimport { ExchangeSectionProps } from '@/types/components';\n\nexport default function ExchangeSection(props: Partial<ExchangeSectionProps> = {}) {\n  const { stats, onExchange, isLoading: externalLoading, className, ...otherProps } = props;\n  const { wallet, updateBalances } = useWallet();\n\n  // 输入值\n  const [inputAmount, setInputAmount] = useState<string>('');\n  // 输出值\n  const [outputAmount, setOutputAmount] = useState<string>('0');\n  // 模拟汇率 (1 BNB = ? SM)\n  const [exchangeRate, setExchangeRate] = useState<number>(1200);\n  // 处理状态\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // 模拟获取汇率\n  useEffect(() => {\n    // 在实际应用中，这里应该从预言机或API获取实时汇率\n    const fetchExchangeRate = async () => {\n      try {\n        // 模拟API请求延迟\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        // 随机生成1100-1300之间的汇率\n        const rate = 1100 + Math.floor(Math.random() * 200);\n        setExchangeRate(rate);\n      } catch (error) {\n        console.error('获取汇率失败:', error);\n      }\n    };\n\n    fetchExchangeRate();\n    // 减少更新频率，避免性能问题\n    const interval = setInterval(() => {\n      if (document.visibilityState === 'visible') {\n        fetchExchangeRate();\n      }\n    }, 120000); // 从30秒改为2分钟更新一次\n\n    return () => clearInterval(interval as NodeJS.Timeout);\n  }, []);\n\n  // 根据输入计算输出\n  const calculateOutput = (input: string) => {\n    if (!input || isNaN(Number(input))) {\n      return '0';\n    }\n\n    const bnbAmount = parseFloat(input);\n    const smAmount = bnbAmount * exchangeRate;\n\n    return smAmount.toFixed(2);\n  };\n\n  // 处理输入变化\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n\n    // 使用安全的输入验证\n    if (value === '' || InputValidator.validateNumber(value)) {\n      // 检查数值范围\n      const numValue = parseFloat(value);\n      if (value !== '' && !InputValidator.validateRange(numValue, SecurityConfig.numberLimits.minAmount, SecurityConfig.numberLimits.maxAmount)) {\n        return; // 超出范围，不更新\n      }\n\n      setInputAmount(value);\n      setOutputAmount(calculateOutput(value));\n    }\n  };\n\n  // 处理兑换操作\n  const handleExchange = async () => {\n    if (!wallet.isConnected) {\n      alert('请先连接钱包');\n      return;\n    }\n\n    if (!inputAmount || parseFloat(inputAmount) <= 0) {\n      alert('请输入有效的BNB数量');\n      return;\n    }\n\n    const bnbAmount = parseFloat(inputAmount);\n    const currentBnbBalance = wallet.balance ? parseFloat(wallet.balance.bnb) : 0;\n    if (bnbAmount > currentBnbBalance) {\n      alert('BNB余额不足');\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      // 在实际应用中，这里应该调用智能合约进行实际兑换\n      // 模拟交易延迟\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n\n      // 计算SM数量\n      const smAmount = bnbAmount * exchangeRate;\n\n      // 更新余额 - 调用钱包服务重新获取余额\n      await updateBalances();\n\n      // 重置表单\n      setInputAmount('');\n      setOutputAmount('0');\n\n      // 显示成功消息\n      alert(\n        `兑换成功！您已将 ${bnbAmount} BNB 兑换为 ${smAmount.toFixed(2)} SM`,\n      );\n    } catch (error) {\n      console.error('兑换失败:', error);\n      alert('兑换失败，请稍后重试');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // 最大可兑换金额\n  const handleMaxAmount = () => {\n    if (wallet.isConnected && wallet.balance) {\n      const bnbBalance = parseFloat(wallet.balance.bnb);\n      if (bnbBalance > 0) {\n        // 保留4位小数\n        const maxAmount = Math.max(0, bnbBalance).toFixed(4);\n        setInputAmount(maxAmount);\n        setOutputAmount(calculateOutput(maxAmount));\n      }\n    }\n  };\n\n  return (\n    <div className={`glass-card p-6 ${className || ''}`} {...otherProps}>\n      <h2 className=\"text-2xl font-bold mb-6\">BNB兑换SM</h2>\n\n      {/* 汇率显示 */}\n      <div className=\"flex items-center justify-between mb-6 p-3 bg-black/30 rounded-lg border border-gray-800\">\n        <div className=\"flex items-center gap-2\">\n          🔄\n          <span className=\"text-sm text-gray-300\">当前汇率</span>\n        </div>\n        <div className=\"font-medium\">\n          1 BNB = <span className=\"text-primary\">{exchangeRate}</span> SM\n        </div>\n      </div>\n\n      {/* 兑换表单 */}\n      <div className=\"space-y-4\">\n        {/* 输入框 - BNB */}\n        <div className=\"bg-black/40 p-4 rounded-lg border border-gray-800\">\n          <div className=\"flex justify-between mb-2\">\n            <label className=\"text-sm text-gray-400\">从</label>\n            {wallet.isConnected && wallet.balance && (\n              <div className=\"text-xs text-gray-400\">\n                余额: {parseFloat(wallet.balance.bnb).toFixed(4)} BNB\n                <button\n                  onClick={handleMaxAmount}\n                  className=\"ml-2 text-primary text-xs hover:underline\"\n                >\n                  最大\n                </button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              type=\"text\"\n              value={inputAmount}\n              onChange={handleInputChange}\n              placeholder=\"0.0\"\n              className=\"bg-transparent text-white text-xl w-full focus:outline-none\"\n              disabled={isProcessing}\n            />\n            <div className=\"flex items-center gap-2 font-medium\">\n              <div className=\"w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center text-xs font-bold text-black\">\n                B\n              </div>\n              BNB\n            </div>\n          </div>\n        </div>\n\n        {/* 输出框 - SM */}\n        <div className=\"bg-black/40 p-4 rounded-lg border border-gray-800\">\n          <div className=\"flex justify-between mb-2\">\n            <label className=\"text-sm text-gray-400\">至</label>\n            {wallet.isConnected && wallet.balance && wallet.balance.sm && (\n              <div className=\"text-xs text-gray-400\">\n                余额: {parseFloat(wallet.balance.sm).toFixed(2)} SM\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              type=\"text\"\n              value={outputAmount}\n              readOnly\n              className=\"bg-transparent text-white text-xl w-full focus:outline-none\"\n            />\n            <div className=\"flex items-center gap-2 font-medium\">\n              <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-xs font-bold text-white\">\n                SM\n              </div>\n              SM\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Gas费提示 */}\n      <div className=\"flex items-center gap-2 mt-4 mb-6 text-sm text-gray-400\">\n        <FaGasPump className=\"text-yellow-500\" />\n        <span>您需要支付少量BNB作为Gas费用</span>\n      </div>\n\n      {/* 兑换按钮 */}\n      <button\n        onClick={handleExchange}\n        disabled={\n          isProcessing ||\n          !wallet.isConnected ||\n          !inputAmount ||\n          parseFloat(inputAmount) <= 0\n        }\n        className={`w-full py-3 px-4 rounded-md flex items-center justify-center gap-2 ${\n          isProcessing ||\n          !wallet.isConnected ||\n          !inputAmount ||\n          parseFloat(inputAmount) <= 0\n            ? 'bg-gray-700 text-gray-400 cursor-not-allowed'\n            : 'neon-button'\n        }`}\n      >\n        {isProcessing ? (\n          <>\n            <div className=\"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin\"></div>\n            处理中...\n          </>\n        ) : (\n          '兑换'\n        )}\n      </button>\n\n      {!wallet.isConnected && (\n        <div className=\"mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-yellow-400\">\n          <p>请先连接钱包以使用兑换功能</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}