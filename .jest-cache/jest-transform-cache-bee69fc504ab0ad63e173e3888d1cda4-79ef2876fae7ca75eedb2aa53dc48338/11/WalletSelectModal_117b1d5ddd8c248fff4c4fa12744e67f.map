{"version":3,"names":["_default","WalletSelectModal","isOpen","onClose","cov_1pbhj38fv7","f","connectWallet","isConnecting","availableWallets","s","_WalletContext","useWallet","t","_LanguageContext","useLanguage","modalRef","_react","useRef","connectingIndex","setConnectingIndex","useState","useEffect","handleClickOutside","event","b","current","contains","target","document","addEventListener","removeEventListener","handleEscKey","key","handleWalletConnect","index","wallet","type","_jsxruntime","jsx","className","role","jsxs","ref","onClick","_io","IoMdClose","size","Array","isArray","map","isCurrentConnecting","isWalletConnecting","disabled","installed","_image","default","src","icon","alt","name","width","height","onError","e","href","rel"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/components/wallet/WalletSelectModal.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport Image from 'next/image';\nimport { IoMdClose } from 'react-icons/io';\nimport { useWallet } from '@/contexts/WalletContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\n\ninterface WalletSelectModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst WalletSelectModal = ({ isOpen, onClose }: WalletSelectModalProps) => {\n  const { connectWallet, isConnecting, availableWallets } = useWallet();\n  const { t } = useLanguage();\n  const modalRef = useRef<HTMLDivElement>(null);\n  const [connectingIndex, setConnectingIndex] = useState<number | null>(null);\n\n  // 处理点击外部关闭\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        modalRef.current &&\n        !modalRef.current.contains(event.target as Node)\n      ) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, onClose]);\n\n  // 处理ESC键关闭\n  useEffect(() => {\n    const handleEscKey = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('keydown', handleEscKey);\n    }\n\n    return () => {\n      document.removeEventListener('keydown', handleEscKey);\n    };\n  }, [isOpen, onClose]);\n\n  // 处理连接钱包\n  const handleWalletConnect = async (index: number) => {\n    const wallet = availableWallets[index];\n    setConnectingIndex(index);\n    await connectWallet(wallet.type);\n    setConnectingIndex(null);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[10000000]\"\n      aria-modal=\"true\"\n      role=\"dialog\"\n    >\n      <div\n        ref={modalRef}\n        className=\"bg-gray-900 border border-gray-800 rounded-lg max-w-md w-full mx-4 shadow-2xl shadow-[#0de5ff]/10\"\n      >\n        <div className=\"flex justify-between items-center p-4 border-b border-gray-800\">\n          <h3 className=\"text-lg font-bold text-white\">{t('profile.connectWallet')}</h3>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-white transition-colors\"\n            aria-label={t('common.cancel')}\n          >\n            <IoMdClose size={24} />\n          </button>\n        </div>\n\n        <div className=\"p-4\">\n          <div className=\"grid gap-2\">\n            {Array.isArray(availableWallets) ? (\n              availableWallets.map((wallet, index) => {\n                const isCurrentConnecting = connectingIndex === index;\n                const isWalletConnecting =\n                  isConnecting && connectingIndex === index;\n\n                return (\n                  <button\n                    key={wallet.type}\n                    onClick={() => handleWalletConnect(index)}\n                    disabled={isConnecting}\n                    className={`\n                      flex items-center justify-between p-3 rounded-lg transition-all\n                      ${wallet.installed ? 'bg-gray-800 border border-gray-700 hover:border-[#0de5ff]/50' : 'bg-gray-800/50 border border-gray-800'}\n                      ${isCurrentConnecting ? 'border-[#0de5ff]' : ''}\n                      ${!wallet.installed && wallet.type !== 'walletconnect' ? 'opacity-60' : 'opacity-100'}\n                    `}\n                  >\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 rounded-md bg-gray-700 flex items-center justify-center mr-3 p-1\">\n                        <div className=\"relative w-full h-full\">\n                          <Image\n                            src={wallet.icon}\n                            alt={wallet.name}\n                            width={32}\n                            height={32}\n                            className=\"object-contain\"\n                            onError={(e) => {\n                              // 图片加载失败时的替代方案\n                              (e.target as HTMLImageElement).src =\n                                '/images/wallets/generic.svg';\n                            }}\n                          />\n                        </div>\n                      </div>\n                      <div>\n                        <div className=\"font-medium text-left\">{wallet.name}</div>\n                        {!wallet.installed && wallet.type !== 'walletconnect' && (\n                          <div className=\"text-xs text-gray-400 text-left\">\n                            {t('profile.notInstalled')}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n\n                    {isWalletConnecting && (\n                      <div className=\"w-5 h-5 border-2 border-t-transparent border-[#0de5ff] rounded-full animate-spin\"></div>\n                    )}\n                  </button>\n                );\n              })\n            ) : (\n              <div className=\"text-center py-4 text-gray-400\">\n                {t('common.loading')}...\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4 text-center text-xs text-gray-400\">\n            {t('profile.walletTermsAgreement')}\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t border-gray-800 flex justify-center gap-4\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 rounded-md border border-gray-700 hover:bg-gray-800 transition-colors\"\n          >\n            {t('common.cancel')}\n          </button>\n          <a\n            href=\"https://docs.sociomint.com/help/wallets\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-[#0de5ff] hover:text-white text-sm flex items-center underline\"\n          >\n            {t('common.needHelp')}\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WalletSelectModal;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}