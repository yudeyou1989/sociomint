{"version":3,"names":["cov_1jmkc24v2k","actualCoverage","s","SocialAuthSection","f","wallet","updateBalances","_WalletContext","useWallet","authStatus","setAuthStatus","_react","useState","x","telegram","discord","platforms","id","name","icon","_jsxruntime","jsx","_fa","FaTwitter","className","reward","description","FaTelegram","FaDiscord","startAuth","platform","isConnected","b","alert","prev","Promise","resolve","setTimeout","find","p","redFlower","balance","error","console","getAuthButton","status","jsxs","disabled","FaCheck","FaSpinner","onClick","map"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/components/home/SocialAuthSection.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport {\n  FaTwitter,\n  FaTelegram,\n  FaDiscord,\n  FaCheck,\n  FaSpinner,\n} from 'react-icons/fa';\nimport { useWallet } from '@/contexts/WalletContext';\n\n// 定义社交平台类型\ntype SocialPlatform = 'x' | 'telegram' | 'discord';\n\n// 社交平台认证状态\ninterface AuthStatus {\n  x: 'pending' | 'completed' | 'not_started';\n  telegram: 'pending' | 'completed' | 'not_started';\n  discord: 'pending' | 'completed' | 'not_started';\n}\n\nexport default function SocialAuthSection() {\n  const { wallet, updateBalances } = useWallet();\n\n  // 认证状态\n  const [authStatus, setAuthStatus] = useState<AuthStatus>({\n    x: 'not_started',\n    telegram: 'not_started',\n    discord: 'not_started',\n  });\n\n  // 认证平台配置\n  const platforms = [\n    {\n      id: 'x' as SocialPlatform,\n      name: 'X (Twitter)',\n      icon: <FaTwitter className=\"w-8 h-8 text-blue-400\" />,\n      reward: 200,\n      description: '连接并认证您的X (Twitter)账号，获得200小红花奖励',\n    },\n    {\n      id: 'telegram' as SocialPlatform,\n      name: 'Telegram',\n      icon: <FaTelegram className=\"w-8 h-8 text-cyan-400\" />,\n      reward: 150,\n      description: '连接并认证您的Telegram账号，获得150小红花奖励',\n    },\n    {\n      id: 'discord' as SocialPlatform,\n      name: 'Discord',\n      icon: <FaDiscord className=\"w-8 h-8 text-purple-400\" />,\n      reward: 180,\n      description: '连接并认证您的Discord账号，获得180小红花奖励',\n    },\n  ];\n\n  // 开始认证流程\n  const startAuth = async (platform: SocialPlatform) => {\n    if (!wallet.isConnected) {\n      alert('请先连接钱包');\n      return;\n    }\n\n    // 更新状态为pending\n    setAuthStatus((prev) => ({\n      ...prev,\n      [platform]: 'pending',\n    }));\n\n    try {\n      // 在实际应用中，这里应该重定向到平台认证页面或打开认证弹窗\n      // 为演示，我们使用setTimeout模拟异步认证流程\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n\n      // 模拟认证成功\n      setAuthStatus((prev) => ({\n        ...prev,\n        [platform]: 'completed',\n      }));\n\n      // 获取平台奖励数量\n      const reward = platforms.find((p) => p.id === platform)?.reward || 0;\n\n      // 更新小红花余额\n      updateBalances({\n        redFlower: (wallet.balance.redFlower || 0) + reward,\n      });\n\n      // 显示成功消息\n      alert(`恭喜！成功认证${platform}平台，获得${reward}小红花奖励！`);\n    } catch (error) {\n      console.error('认证失败:', error);\n      setAuthStatus((prev) => ({\n        ...prev,\n        [platform]: 'not_started',\n      }));\n      alert('认证失败，请稍后重试');\n    }\n  };\n\n  // 根据认证状态返回按钮文本和样式\n  const getAuthButton = (platform: SocialPlatform) => {\n    const status = authStatus[platform];\n\n    if (status === 'completed') {\n      return (\n        <button\n          className=\"flex items-center justify-center gap-2 py-2 px-4 bg-green-600/30 text-green-400 rounded-md cursor-default border border-green-600/50\"\n          disabled\n        >\n          <FaCheck className=\"w-4 h-4\" />\n          已认证\n        </button>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <button\n          className=\"flex items-center justify-center gap-2 py-2 px-4 bg-gray-700 text-gray-300 rounded-md cursor-wait\"\n          disabled\n        >\n          <FaSpinner className=\"w-4 h-4 animate-spin\" />\n          认证中...\n        </button>\n      );\n    }\n\n    return (\n      <button\n        onClick={() => startAuth(platform)}\n        className=\"neon-button py-2 px-4 rounded-md\"\n      >\n        去认证\n      </button>\n    );\n  };\n\n  return (\n    <div className=\"glass-card p-6\">\n      <h2 className=\"text-2xl font-bold mb-6\">社交平台认证</h2>\n      <p className=\"text-gray-400 mb-6\">\n        认证您的社交媒体账号，获取小红花奖励。每个平台仅能认证一次。\n      </p>\n\n      <div className=\"space-y-6\">\n        {platforms.map((platform) => (\n          <div\n            key={platform.id}\n            className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-black/30 rounded-lg border border-gray-800 gap-4\"\n          >\n            <div className=\"flex items-center gap-4\">\n              <div className=\"p-3 rounded-full bg-black/50 border border-gray-700\">\n                {platform.icon}\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-lg\">{platform.name}</h3>\n                <p className=\"text-gray-400 text-sm\">{platform.description}</p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-4 ml-0 sm:ml-4\">\n              <div className=\"text-primary font-semibold\">\n                +{platform.reward}{' '}\n                <span className=\"text-sm text-gray-400\">小红花</span>\n              </div>\n              {getAuthButton(platform.id)}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {!wallet.isConnected && (\n        <div className=\"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-yellow-400\">\n          <p>请先连接钱包以进行社交平台认证</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}