{"version":3,"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/__tests__/components/TokenExchange.test.tsx"],"sourcesContent":["import React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport TokenExchange from '../../TokenExchange';\nimport { WalletProvider } from '../../contexts/WalletContext';\n\n// 模拟 ethers\nconst mockContract = {\n  getExchangeStats: jest.fn().mockResolvedValue({\n    totalTokensSold: BigInt('1000000000000000000000'),\n    totalTokensRemaining: BigInt('9000000000000000000000'),\n    totalBnbRaised: BigInt('100000000000000000000'),\n    currentPrice: BigInt('833000000000'),\n    nextRoundPrice: BigInt('974900000000'),\n    isActive: true,\n    currentRound: 0,\n  }),\n  exchangeTokens: jest.fn().mockResolvedValue({\n    hash: '0x123456789abcdef',\n    wait: jest.fn().mockResolvedValue({ status: 1 })\n  }),\n  minPurchaseAmount: jest.fn().mockResolvedValue(BigInt('10000000000000000')),\n  maxPurchaseAmount: jest.fn().mockResolvedValue(BigInt('10000000000000000000')),\n};\n\nconst mockProvider = {\n  getSigner: jest.fn().mockResolvedValue({\n    getAddress: jest.fn().mockResolvedValue('0x123456789abcdef'),\n  }),\n  getBalance: jest.fn().mockResolvedValue(BigInt('5000000000000000000')),\n};\n\njest.mock('ethers', () => ({\n  BrowserProvider: jest.fn().mockImplementation(() => mockProvider),\n  Contract: jest.fn().mockImplementation(() => mockContract),\n  formatEther: jest.fn().mockImplementation((value) => {\n    return (Number(value) / 1e18).toString();\n  }),\n  formatUnits: jest.fn().mockImplementation((value, decimals) => {\n    return (Number(value) / Math.pow(10, decimals)).toString();\n  }),\n  parseEther: jest.fn().mockImplementation((value) => {\n    return BigInt(Math.floor(parseFloat(value) * 1e18));\n  }),\n}));\n\n// 模拟 WalletContext\nconst mockWalletContext = {\n  wallet: {\n    isConnected: true,\n    address: '0x123456789abcdef123456789abcdef123456789a',\n    chainId: 97,\n    balance: {\n      bnb: '5.0',\n      sm: '100.0'\n    }\n  },\n  connectWallet: jest.fn(),\n  disconnectWallet: jest.fn(),\n  isConnecting: false,\n};\n\njest.mock('../../contexts/WalletContext', () => ({\n  useWallet: () => mockWalletContext,\n  WalletProvider: ({ children }: { children: React.ReactNode }) => <div>{children}</div>,\n}));\n\nconst TestWrapper = ({ children }: { children: React.ReactNode }) => (\n  <WalletProvider>\n    {children}\n  </WalletProvider>\n);\n\ndescribe('TokenExchange Component', () => {\n  const user = userEvent.setup();\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('renders exchange interface correctly', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText('代币兑换')).toBeInTheDocument();\n      expect(screen.getByText('购买 SM 代币')).toBeInTheDocument();\n    });\n  });\n\n  it('displays exchange statistics', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/已售出代币/)).toBeInTheDocument();\n      expect(screen.getByText(/剩余代币/)).toBeInTheDocument();\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n  });\n\n  it('handles BNB input correctly', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    expect(bnbInput).toHaveValue('1.0');\n  });\n\n  it('calculates token amount correctly', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    await waitFor(() => {\n      expect(screen.getByText(/您将获得/)).toBeInTheDocument();\n    });\n  });\n\n  it('validates minimum purchase amount', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '0.005'); // 低于最小金额\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/购买金额不能低于最小限制/)).toBeInTheDocument();\n    });\n  });\n\n  it('validates maximum purchase amount', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '15.0'); // 高于最大金额\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/购买金额不能超过最大限制/)).toBeInTheDocument();\n    });\n  });\n\n  it('validates sufficient balance', async () => {\n    // 模拟余额不足\n    mockProvider.getBalance.mockResolvedValue(BigInt('100000000000000000')); // 0.1 BNB\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/余额不足/)).toBeInTheDocument();\n    });\n  });\n\n  it('executes token purchase successfully', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(mockContract.exchangeTokens).toHaveBeenCalledWith({\n        value: expect.any(BigInt)\n      });\n    });\n\n    await waitFor(() => {\n      expect(screen.getByText(/交易成功/)).toBeInTheDocument();\n    });\n  });\n\n  it('handles transaction failure', async () => {\n    mockContract.exchangeTokens.mockRejectedValue(new Error('Transaction failed'));\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/交易失败/)).toBeInTheDocument();\n    });\n  });\n\n  it('displays loading state during transaction', async () => {\n    // 模拟慢交易\n    const slowWait = jest.fn().mockImplementation(() => \n      new Promise(resolve => setTimeout(() => resolve({ status: 1 }), 1000))\n    );\n    \n    mockContract.exchangeTokens.mockResolvedValue({\n      hash: '0x123456789abcdef',\n      wait: slowWait\n    });\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/交易进行中/)).toBeInTheDocument();\n    });\n  });\n\n  it('updates exchange stats after successful purchase', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n\n    const bnbInput = screen.getByPlaceholderText('输入 BNB 数量');\n    \n    await user.clear(bnbInput);\n    await user.type(bnbInput, '1.0');\n\n    const purchaseButton = screen.getByText('购买代币');\n    await user.click(purchaseButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/交易成功/)).toBeInTheDocument();\n    });\n\n    // 应该重新获取统计信息\n    await waitFor(() => {\n      expect(mockContract.getExchangeStats).toHaveBeenCalledTimes(2);\n    });\n  });\n\n  it('handles exchange inactive state', async () => {\n    mockContract.getExchangeStats.mockResolvedValue({\n      totalTokensSold: BigInt('1000000000000000000000'),\n      totalTokensRemaining: BigInt('9000000000000000000000'),\n      totalBnbRaised: BigInt('100000000000000000000'),\n      currentPrice: BigInt('833000000000'),\n      nextRoundPrice: BigInt('974900000000'),\n      isActive: false, // 交换未激活\n      currentRound: 0,\n    });\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/代币兑换暂未开放/)).toBeInTheDocument();\n    });\n\n    const purchaseButton = screen.getByText('购买代币');\n    expect(purchaseButton).toBeDisabled();\n  });\n\n  it('displays correct price formatting', async () => {\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/0\\.000000000833/)).toBeInTheDocument();\n    });\n  });\n\n  it('handles wallet not connected state', async () => {\n    // 模拟钱包未连接\n    const disconnectedWalletContext = {\n      ...mockWalletContext,\n      wallet: {\n        ...mockWalletContext.wallet,\n        isConnected: false,\n        address: '',\n      }\n    };\n\n    jest.mocked(require('../../contexts/WalletContext').useWallet).mockReturnValue(disconnectedWalletContext);\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    expect(screen.getByText('请先连接钱包')).toBeInTheDocument();\n    \n    const purchaseButton = screen.getByText('购买代币');\n    expect(purchaseButton).toBeDisabled();\n  });\n\n  it('handles network error gracefully', async () => {\n    mockContract.getExchangeStats.mockRejectedValue(new Error('Network error'));\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/加载失败/)).toBeInTheDocument();\n    });\n\n    const retryButton = screen.getByText('重试');\n    expect(retryButton).toBeInTheDocument();\n  });\n\n  it('retries loading on network error', async () => {\n    mockContract.getExchangeStats\n      .mockRejectedValueOnce(new Error('Network error'))\n      .mockResolvedValue({\n        totalTokensSold: BigInt('1000000000000000000000'),\n        totalTokensRemaining: BigInt('9000000000000000000000'),\n        totalBnbRaised: BigInt('100000000000000000000'),\n        currentPrice: BigInt('833000000000'),\n        nextRoundPrice: BigInt('974900000000'),\n        isActive: true,\n        currentRound: 0,\n      });\n\n    render(\n      <TestWrapper>\n        <TokenExchange />\n      </TestWrapper>\n    );\n\n    await waitFor(() => {\n      expect(screen.getByText(/加载失败/)).toBeInTheDocument();\n    });\n\n    const retryButton = screen.getByText('重试');\n    await user.click(retryButton);\n\n    await waitFor(() => {\n      expect(screen.getByText(/当前价格/)).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["jest","mock","BrowserProvider","fn","mockImplementation","mockProvider","Contract","mockContract","formatEther","value","Number","toString","formatUnits","decimals","Math","pow","parseEther","BigInt","floor","parseFloat","useWallet","mockWalletContext","WalletProvider","children","div","getExchangeStats","mockResolvedValue","totalTokensSold","totalTokensRemaining","totalBnbRaised","currentPrice","nextRoundPrice","isActive","currentRound","exchangeTokens","hash","wait","status","minPurchaseAmount","maxPurchaseAmount","getSigner","getAddress","getBalance","wallet","isConnected","address","chainId","balance","bnb","sm","connectWallet","disconnectWallet","isConnecting","TestWrapper","describe","user","userEvent","setup","beforeEach","clearAllMocks","it","render","TokenExchange","waitFor","expect","screen","getByText","toBeInTheDocument","bnbInput","getByPlaceholderText","clear","type","toHaveValue","purchaseButton","click","toHaveBeenCalledWith","any","mockRejectedValue","Error","slowWait","Promise","resolve","setTimeout","toHaveBeenCalledTimes","toBeDisabled","disconnectedWalletContext","mocked","require","mockReturnValue","retryButton","mockRejectedValueOnce"],"mappings":";AAgCAA,KAAKC,IAAI,CAAC,UAAU,IAAO,CAAA;QACzBC,iBAAiBF,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,IAAMC;QACpDC,UAAUN,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,IAAMG;QAC7CC,aAAaR,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,CAACK;YACzC,OAAO,AAACC,CAAAA,OAAOD,SAAS,IAAG,EAAGE,QAAQ;QACxC;QACAC,aAAaZ,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,CAACK,OAAOI;YAChD,OAAO,AAACH,CAAAA,OAAOD,SAASK,KAAKC,GAAG,CAAC,IAAIF,SAAQ,EAAGF,QAAQ;QAC1D;QACAK,YAAYhB,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,CAACK;YACxC,OAAOQ,OAAOH,KAAKI,KAAK,CAACC,WAAWV,SAAS;QAC/C;IACF,CAAA;AAkBAT,KAAKC,IAAI,CAAC,gCAAgC,IAAO,CAAA;QAC/CmB,WAAW,IAAMC;QACjBC,gBAAgB,CAAC,EAAEC,QAAQ,EAAiC,iBAAK,qBAACC;0BAAKD;;IACzE,CAAA;;;;;8DAjEkB;wBACiC;kEAC7B;sEACI;+BACK;;;;;;AAE/B,YAAY;AACZ,MAAMhB,eAAe;IACnBkB,kBAAkBzB,KAAKG,EAAE,GAAGuB,iBAAiB,CAAC;QAC5CC,iBAAiBV,OAAO;QACxBW,sBAAsBX,OAAO;QAC7BY,gBAAgBZ,OAAO;QACvBa,cAAcb,OAAO;QACrBc,gBAAgBd,OAAO;QACvBe,UAAU;QACVC,cAAc;IAChB;IACAC,gBAAgBlC,KAAKG,EAAE,GAAGuB,iBAAiB,CAAC;QAC1CS,MAAM;QACNC,MAAMpC,KAAKG,EAAE,GAAGuB,iBAAiB,CAAC;YAAEW,QAAQ;QAAE;IAChD;IACAC,mBAAmBtC,KAAKG,EAAE,GAAGuB,iBAAiB,CAACT,OAAO;IACtDsB,mBAAmBvC,KAAKG,EAAE,GAAGuB,iBAAiB,CAACT,OAAO;AACxD;AAEA,MAAMZ,eAAe;IACnBmC,WAAWxC,KAAKG,EAAE,GAAGuB,iBAAiB,CAAC;QACrCe,YAAYzC,KAAKG,EAAE,GAAGuB,iBAAiB,CAAC;IAC1C;IACAgB,YAAY1C,KAAKG,EAAE,GAAGuB,iBAAiB,CAACT,OAAO;AACjD;AAgBA,mBAAmB;AACnB,MAAMI,oBAAoB;IACxBsB,QAAQ;QACNC,aAAa;QACbC,SAAS;QACTC,SAAS;QACTC,SAAS;YACPC,KAAK;YACLC,IAAI;QACN;IACF;IACAC,eAAelD,KAAKG,EAAE;IACtBgD,kBAAkBnD,KAAKG,EAAE;IACzBiD,cAAc;AAChB;AAOA,MAAMC,cAAc,CAAC,EAAE9B,QAAQ,EAAiC,iBAC9D,qBAACD,6BAAc;kBACZC;;AAIL+B,SAAS,2BAA2B;IAClC,MAAMC,OAAOC,kBAAS,CAACC,KAAK;IAE5BC,WAAW;QACT1D,KAAK2D,aAAa;IACpB;IAEAC,GAAG,wCAAwC;QACzCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;YAClDH,OAAOC,cAAM,CAACC,SAAS,CAAC,aAAaC,iBAAiB;QACxD;IACF;IAEAP,GAAG,gCAAgC;QACjCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,UAAUC,iBAAiB;YACnDH,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;YAClDH,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAP,GAAG,+BAA+B;QAChCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMM,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1BJ,OAAOI,UAAUI,WAAW,CAAC;IAC/B;IAEAZ,GAAG,qCAAqC;QACtCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMC,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAML,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAP,GAAG,qCAAqC;QACtCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMM,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU,UAAU,SAAS;QAE7C,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,iBAAiBC,iBAAiB;QAC5D;IACF;IAEAP,GAAG,qCAAqC;QACtCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMM,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU,SAAS,SAAS;QAE5C,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,iBAAiBC,iBAAiB;QAC5D;IACF;IAEAP,GAAG,gCAAgC;QACjC,SAAS;QACTvD,aAAaqC,UAAU,CAAChB,iBAAiB,CAACT,OAAO,wBAAwB,UAAU;QAEnF4C,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMM,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAP,GAAG,wCAAwC;QACzCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMC,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOzD,aAAa2B,cAAc,EAAEyC,oBAAoB,CAAC;gBACvDlE,OAAOuD,OAAOY,GAAG,CAAC3D;YACpB;QACF;QAEA,MAAM8C,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAP,GAAG,+BAA+B;QAChCrD,aAAa2B,cAAc,CAAC2C,iBAAiB,CAAC,IAAIC,MAAM;QAExDjB,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMC,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAP,GAAG,6CAA6C;QAC9C,QAAQ;QACR,MAAMmB,WAAW/E,KAAKG,EAAE,GAAGC,kBAAkB,CAAC,IAC5C,IAAI4E,QAAQC,CAAAA,UAAWC,WAAW,IAAMD,QAAQ;wBAAE5C,QAAQ;oBAAE,IAAI;QAGlE9B,aAAa2B,cAAc,CAACR,iBAAiB,CAAC;YAC5CS,MAAM;YACNC,MAAM2C;QACR;QAEAlB,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMC,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,UAAUC,iBAAiB;QACrD;IACF;IAEAP,GAAG,oDAAoD;QACrDC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMC,WAAWH,cAAM,CAACI,oBAAoB,CAAC;QAE7C,MAAMd,KAAKe,KAAK,CAACF;QACjB,MAAMb,KAAKgB,IAAI,CAACH,UAAU;QAE1B,MAAMK,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxC,MAAMX,KAAKmB,KAAK,CAACD;QAEjB,MAAMV,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,aAAa;QACb,MAAMJ,IAAAA,eAAO,EAAC;YACZC,OAAOzD,aAAakB,gBAAgB,EAAE0D,qBAAqB,CAAC;QAC9D;IACF;IAEAvB,GAAG,mCAAmC;QACpCrD,aAAakB,gBAAgB,CAACC,iBAAiB,CAAC;YAC9CC,iBAAiBV,OAAO;YACxBW,sBAAsBX,OAAO;YAC7BY,gBAAgBZ,OAAO;YACvBa,cAAcb,OAAO;YACrBc,gBAAgBd,OAAO;YACvBe,UAAU;YACVC,cAAc;QAChB;QAEA4B,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,aAAaC,iBAAiB;QACxD;QAEA,MAAMM,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxCF,OAAOS,gBAAgBW,YAAY;IACrC;IAEAxB,GAAG,qCAAqC;QACtCC,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,oBAAoBC,iBAAiB;QAC/D;IACF;IAEAP,GAAG,sCAAsC;QACvC,UAAU;QACV,MAAMyB,4BAA4B;YAChC,GAAGhE,iBAAiB;YACpBsB,QAAQ;gBACN,GAAGtB,kBAAkBsB,MAAM;gBAC3BC,aAAa;gBACbC,SAAS;YACX;QACF;QAEA7C,KAAKsF,MAAM,CAACC,QAAQ,gCAAgCnE,SAAS,EAAEoE,eAAe,CAACH;QAE/ExB,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlBE,OAAOC,cAAM,CAACC,SAAS,CAAC,WAAWC,iBAAiB;QAEpD,MAAMM,iBAAiBR,cAAM,CAACC,SAAS,CAAC;QACxCF,OAAOS,gBAAgBW,YAAY;IACrC;IAEAxB,GAAG,oCAAoC;QACrCrD,aAAakB,gBAAgB,CAACoD,iBAAiB,CAAC,IAAIC,MAAM;QAE1DjB,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMsB,cAAcxB,cAAM,CAACC,SAAS,CAAC;QACrCF,OAAOyB,aAAatB,iBAAiB;IACvC;IAEAP,GAAG,oCAAoC;QACrCrD,aAAakB,gBAAgB,CAC1BiE,qBAAqB,CAAC,IAAIZ,MAAM,kBAChCpD,iBAAiB,CAAC;YACjBC,iBAAiBV,OAAO;YACxBW,sBAAsBX,OAAO;YAC7BY,gBAAgBZ,OAAO;YACvBa,cAAcb,OAAO;YACrBc,gBAAgBd,OAAO;YACvBe,UAAU;YACVC,cAAc;QAChB;QAEF4B,IAAAA,cAAM,gBACJ,qBAACR;sBACC,cAAA,qBAACS,sBAAa;;QAIlB,MAAMC,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEA,MAAMsB,cAAcxB,cAAM,CAACC,SAAS,CAAC;QACrC,MAAMX,KAAKmB,KAAK,CAACe;QAEjB,MAAM1B,IAAAA,eAAO,EAAC;YACZC,OAAOC,cAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;AACF"}