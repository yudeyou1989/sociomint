{"version":3,"names":["cov_2e9w7anruz","actualCoverage","s","WalletProvider","f","useWallet","logger","_logger","default","createContextLogger","component","defaultWalletState","isConnected","defaultAvailableWallets","type","name","icon","installed","WalletContext","_react","createContext","wallet","connect","disconnect","updateBalances","connectWallet","disconnectWallet","isConnecting","availableWallets","checkIfBrowserHasWallet","b","window","ethereum","getEthereumProvider","Error","_ethers","ethers","BrowserProvider","connectToWallet","provider","send","signer","getSigner","address","getAddress","networkInfo","getNetwork","chainId","Number","_contractService","initialize","bnbBalance","getBalance","smBalance","getTokenBalance","error","console","warn","network","id","balance","bnb","formatEther","sm","account","children","setWallet","useState","setIsConnecting","setAvailableWallets","info","action","additionalData","walletType","connectedWallet","_walletService","getConnectedWalletType","log","prev","_jsxruntime","jsx","Provider","value","useContext"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/contexts/WalletContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { ethers, formatEther } from 'ethers';\nimport { WalletType, getConnectedWalletType, disconnectWallet as disconnectWalletService } from '@/services/walletService';\nimport contractService from '@/services/contractService';\nimport Logger from '@/services/logger';\n\n// 创建日志记录器\nconst logger = Logger.createContextLogger({ component: 'WalletContext' });\n\n// 钱包状态接口\nexport interface WalletState {\n  isConnected: boolean;\n  address?: string;\n  chainId?: number;\n  balance?: {\n    bnb: string;\n    sm?: string;\n  };\n  network?: {\n    id: number;\n    name: string;\n  };\n  account?: {\n    address: string;\n  };\n}\n\n// 可用钱包接口\nexport interface AvailableWallet {\n  type: WalletType;\n  name: string;\n  icon: string;\n  installed: boolean;\n}\n\n// 钱包上下文接口\ninterface WalletContextType {\n  wallet: WalletState;\n  connect: () => Promise<void>;\n  disconnect: () => Promise<void>;\n  updateBalances: () => Promise<void>;\n  connectWallet: (type: WalletType) => Promise<void>;\n  disconnectWallet: () => Promise<void>;\n  isConnecting: boolean;\n  availableWallets: AvailableWallet[];\n}\n\n// 创建上下文，提供默认值\nconst defaultWalletState: WalletState = {\n  isConnected: false,\n};\n\n// 默认可用钱包列表\nconst defaultAvailableWallets: AvailableWallet[] = [\n  {\n    type: 'metamask',\n    name: 'MetaMask',\n    icon: '/images/wallets/metamask.svg',\n    installed: true\n  },\n  {\n    type: 'coinbase',\n    name: 'Coinbase Wallet',\n    icon: '/images/wallets/coinbase.svg',\n    installed: true\n  },\n  {\n    type: 'walletconnect',\n    name: 'WalletConnect',\n    icon: '/images/wallets/walletconnect.svg',\n    installed: true\n  }\n];\n\nconst WalletContext = createContext<WalletContextType>({\n  wallet: defaultWalletState,\n  connect: async () => {},\n  disconnect: async () => {},\n  updateBalances: async () => {},\n  connectWallet: async () => {},\n  disconnectWallet: async () => {},\n  isConnecting: false,\n  availableWallets: defaultAvailableWallets,\n});\n\n// 钱包提供者Props\ninterface WalletProviderProps {\n  children: ReactNode;\n}\n\n// 检查浏览器是否有MetaMask或其他以太坊提供者\nconst checkIfBrowserHasWallet = (): boolean => {\n  return typeof window !== 'undefined' && typeof window.ethereum !== 'undefined';\n};\n\n// 获取以太坊提供者\nconst getEthereumProvider = (): ethers.BrowserProvider => {\n  if (typeof window === 'undefined' || !window.ethereum) {\n    throw new Error('没有检测到Ethereum提供者');\n  }\n  return new ethers.BrowserProvider(window.ethereum as any);\n};\n\n// 连接到以太坊钱包\nconst connectToWallet = async (): Promise<WalletState> => {\n  try {\n    if (!checkIfBrowserHasWallet()) {\n      throw new Error('请安装MetaMask或其他钱包扩展');\n    }\n\n    // 请求用户授权连接钱包\n    const provider = getEthereumProvider();\n    await provider.send('eth_requestAccounts', []);\n\n    const signer = await provider.getSigner();\n    const address = await signer.getAddress();\n    const networkInfo = await provider.getNetwork();\n    const chainId = Number(networkInfo.chainId);\n\n    // 初始化合约服务\n    await contractService.initialize(provider);\n\n    // 获取余额信息\n    const bnbBalance = await provider.getBalance(address);\n\n    let smBalance = '0';\n    try {\n      smBalance = await contractService.getTokenBalance(address);\n    } catch (error) {\n      console.warn('获取SM代币余额失败', error);\n    }\n\n    const network = {\n      id: chainId,\n      name: chainId === 56 ? 'BNB Smart Chain' :\n           chainId === 97 ? 'BNB Smart Chain Testnet' :\n           'Unknown Network'\n    };\n\n    return {\n      isConnected: true,\n      address,\n      chainId,\n      balance: {\n        bnb: formatEther(bnbBalance),\n        sm: smBalance\n      },\n      network,\n      account: { address }\n    };\n  } catch (error) {\n    console.error('连接钱包失败:', error);\n    throw error;\n  }\n};\n\n// 钱包提供者组件\nexport function WalletProvider({ children }: WalletProviderProps) {\n  const [wallet, setWallet] = useState<WalletState>(defaultWalletState);\n  const [isConnecting, setIsConnecting] = useState<boolean>(false);\n  const [availableWallets, setAvailableWallets] = useState<AvailableWallet[]>(defaultAvailableWallets);\n\n  // 连接钱包 - 统一的连接函数\n  const connect = async (type?: WalletType) => {\n    setIsConnecting(true);\n    try {\n      logger.info(type ? `正在连接 ${type} 钱包...` : '连接钱包...', {\n        action: 'connect',\n        additionalData: { walletType: type }\n      });\n\n      const connectedWallet = await connectToWallet();\n      setWallet(connectedWallet);\n\n      logger.info('钱包已连接', {\n        action: 'connect',\n        additionalData: { address: connectedWallet.address, walletType: type }\n      });\n    } catch (error) {\n      logger.error('连接钱包失败', {\n        action: 'connect',\n        additionalData: { error, walletType: type }\n      });\n    } finally {\n      setIsConnecting(false);\n    }\n  };\n\n  // 按类型连接钱包 - 为了保持API兼容性\n  const connectWallet = async (type: WalletType) => {\n    return connect(type);\n  };\n\n  // 断开连接 - 统一的断开连接函数\n  const disconnect = async () => {\n    try {\n      logger.info('断开钱包连接...', {\n        action: 'disconnect'\n      });\n\n      // 尝试断开WalletConnect连接\n      const walletType = getConnectedWalletType();\n      if (walletType) {\n        await disconnectWalletService(walletType);\n      }\n\n      // 重置状态\n      setWallet(defaultWalletState);\n\n      logger.info('钱包已断开连接', {\n        action: 'disconnect'\n      });\n    } catch (error) {\n      logger.error('断开钱包连接失败', {\n        action: 'disconnect',\n        additionalData: { error }\n      });\n    }\n  };\n\n  // 断开钱包连接 - 为了保持API兼容性\n  const disconnectWallet = async () => {\n    return disconnect();\n  };\n\n  // 更新余额\n  const updateBalances = async () => {\n    if (!wallet.isConnected || !wallet.address) return;\n\n    try {\n      console.log('更新余额...');\n\n      // 获取真实余额\n      const provider = getEthereumProvider();\n      const bnbBalance = await provider.getBalance(wallet.address);\n\n      let smBalance = '0';\n      try {\n        smBalance = await contractService.getTokenBalance(wallet.address);\n      } catch (error) {\n        console.warn('获取SM代币余额失败', error);\n      }\n\n      setWallet(prev => ({\n        ...prev,\n        balance: {\n          bnb: formatEther(bnbBalance),\n          sm: smBalance\n        }\n      }));\n\n      console.log('余额已更新');\n    } catch (error) {\n      console.error('更新余额失败:', error);\n    }\n  };\n\n  return (\n    <WalletContext.Provider value={{\n      wallet,\n      connect,\n      disconnect,\n      updateBalances,\n      connectWallet,\n      disconnectWallet,\n      isConnecting,\n      availableWallets\n    }}>\n      {children}\n    </WalletContext.Provider>\n  );\n}\n\n// 钱包钩子\nexport function useWallet() {\n  return useContext(WalletContext);\n}"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAoRgB;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;;;;;;;;;;;;;;EArHAC,cAAc,WAAAA,CAAA;IAAA;IAAAH,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAAdC,cAAA;;EAqHAE,SAAS,WAAAA,CAAA;IAAA;IAAAL,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;WAATG,SAAA;;;;;;;;kCAlR0D;;;kCACtC;;;kCAC4D;;;yEACpE;;;yEACT;;;;;;;;;;;;;;;AAEnB;AACA,MAAMC,MAAA;AAAA;AAAA,CAAAN,cAAA,GAAAE,CAAA,QAASK,OAAA,CAAAC,OAAM,CAACC,mBAAmB,CAAC;EAAEC,SAAA,EAAW;AAAgB;AAwCvE;AACA,MAAMC,kBAAA;AAAA;AAAA,CAAAX,cAAA,GAAAE,CAAA,QAAkC;EACtCU,WAAA,EAAa;AACf;AAEA;AACA,MAAMC,uBAAA;AAAA;AAAA,CAAAb,cAAA,GAAAE,CAAA,QAA6C,CACjD;EACEY,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,SAAA,EAAW;AACb,GACA;EACEH,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,SAAA,EAAW;AACb,GACA;EACEH,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,IAAA,EAAM;EACNC,SAAA,EAAW;AACb,EACD;AAED,MAAMC,aAAA;AAAA;AAAA,cAAAlB,cAAA,GAAAE,CAAA,QAAgB,IAAAiB,MAAA,CAAAC,aAAa,EAAoB;EACrDC,MAAA,EAAQV,kBAAA;EACRW,OAAA,EAAS,MAAAA,CAAA;IAAA;IAAAtB,cAAA,GAAAI,CAAA;EAAa;EACtBmB,UAAA,EAAY,MAAAA,CAAA;IAAA;IAAAvB,cAAA,GAAAI,CAAA;EAAa;EACzBoB,cAAA,EAAgB,MAAAA,CAAA;IAAA;IAAAxB,cAAA,GAAAI,CAAA;EAAa;EAC7BqB,aAAA,EAAe,MAAAA,CAAA;IAAA;IAAAzB,cAAA,GAAAI,CAAA;EAAa;EAC5BsB,gBAAA,EAAkB,MAAAA,CAAA;IAAA;IAAA1B,cAAA,GAAAI,CAAA;EAAa;EAC/BuB,YAAA,EAAc;EACdC,gBAAA,EAAkBf;AACpB;AAOA;AAAA;AAAAb,cAAA,GAAAE,CAAA;AACA,MAAM2B,uBAAA,GAA0BA,CAAA;EAAA;EAAA7B,cAAA,GAAAI,CAAA;EAAAJ,cAAA,GAAAE,CAAA;EAC9B,OAAO,2BAAAF,cAAA,GAAA8B,CAAA,iBAAOC,MAAA,KAAW;EAAA;EAAA,CAAA/B,cAAA,GAAA8B,CAAA,UAAe,OAAOC,MAAA,CAAOC,QAAQ,KAAK;AACrE;AAEA;AAAA;AAAAhC,cAAA,GAAAE,CAAA;AACA,MAAM+B,mBAAA,GAAsBA,CAAA;EAAA;EAAAjC,cAAA,GAAAI,CAAA;EAAAJ,cAAA,GAAAE,CAAA;EAC1B;EAAI;EAAA,CAAAF,cAAA,GAAA8B,CAAA,iBAAOC,MAAA,KAAW;EAAA;EAAA,CAAA/B,cAAA,GAAA8B,CAAA,UAAe,CAACC,MAAA,CAAOC,QAAQ,GAAE;IAAA;IAAAhC,cAAA,GAAA8B,CAAA;IAAA9B,cAAA,GAAAE,CAAA;IACrD,MAAM,IAAIgC,KAAA,CAAM;EAClB;EAAA;EAAA;IAAAlC,cAAA,GAAA8B,CAAA;EAAA;EAAA9B,cAAA,GAAAE,CAAA;EACA,OAAO,IAAIiC,OAAA,CAAAC,MAAM,CAACC,eAAe,CAACN,MAAA,CAAOC,QAAQ;AACnD;AAEA;AAAA;AAAAhC,cAAA,GAAAE,CAAA;AACA,MAAMoC,eAAA,GAAkB,MAAAA,CAAA;EAAA;EAAAtC,cAAA,GAAAI,CAAA;EAAAJ,cAAA,GAAAE,CAAA;EACtB,IAAI;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACF,IAAI,CAAC2B,uBAAA,IAA2B;MAAA;MAAA7B,cAAA,GAAA8B,CAAA;MAAA9B,cAAA,GAAAE,CAAA;MAC9B,MAAM,IAAIgC,KAAA,CAAM;IAClB;IAAA;IAAA;MAAAlC,cAAA,GAAA8B,CAAA;IAAA;IAEA;IACA,MAAMS,QAAA;IAAA;IAAA,CAAAvC,cAAA,GAAAE,CAAA,QAAW+B,mBAAA;IAAA;IAAAjC,cAAA,GAAAE,CAAA;IACjB,MAAMqC,QAAA,CAASC,IAAI,CAAC,uBAAuB,EAAE;IAE7C,MAAMC,MAAA;IAAA;IAAA,CAAAzC,cAAA,GAAAE,CAAA,QAAS,MAAMqC,QAAA,CAASG,SAAS;IACvC,MAAMC,OAAA;IAAA;IAAA,CAAA3C,cAAA,GAAAE,CAAA,QAAU,MAAMuC,MAAA,CAAOG,UAAU;IACvC,MAAMC,WAAA;IAAA;IAAA,CAAA7C,cAAA,GAAAE,CAAA,QAAc,MAAMqC,QAAA,CAASO,UAAU;IAC7C,MAAMC,OAAA;IAAA;IAAA,CAAA/C,cAAA,GAAAE,CAAA,QAAU8C,MAAA,CAAOH,WAAA,CAAYE,OAAO;IAE1C;IAAA;IAAA/C,cAAA,GAAAE,CAAA;IACA,MAAM+C,gBAAA,CAAAzC,OAAe,CAAC0C,UAAU,CAACX,QAAA;IAEjC;IACA,MAAMY,UAAA;IAAA;IAAA,CAAAnD,cAAA,GAAAE,CAAA,QAAa,MAAMqC,QAAA,CAASa,UAAU,CAACT,OAAA;IAE7C,IAAIU,SAAA;IAAA;IAAA,CAAArD,cAAA,GAAAE,CAAA,QAAY;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAChB,IAAI;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACFmD,SAAA,GAAY,MAAMJ,gBAAA,CAAAzC,OAAe,CAAC8C,eAAe,CAACX,OAAA;IACpD,EAAE,OAAOY,KAAA,EAAO;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MACdsD,OAAA,CAAQC,IAAI,CAAC,cAAcF,KAAA;IAC7B;IAEA,MAAMG,OAAA;IAAA;IAAA,CAAA1D,cAAA,GAAAE,CAAA,QAAU;MACdyD,EAAA,EAAIZ,OAAA;MACJhC,IAAA,EAAMgC,OAAA,KAAY;MAAA;MAAA,CAAA/C,cAAA,GAAA8B,CAAA,UAAK;MAAA;MAAA,CAAA9B,cAAA,GAAA8B,CAAA,UAClBiB,OAAA,KAAY;MAAA;MAAA,CAAA/C,cAAA,GAAA8B,CAAA,UAAK;MAAA;MAAA,CAAA9B,cAAA,GAAA8B,CAAA,UACjB;IACP;IAAA;IAAA9B,cAAA,GAAAE,CAAA;IAEA,OAAO;MACLU,WAAA,EAAa;MACb+B,OAAA;MACAI,OAAA;MACAa,OAAA,EAAS;QACPC,GAAA,EAAK,IAAA1B,OAAA,CAAA2B,WAAW,EAACX,UAAA;QACjBY,EAAA,EAAIV;MACN;MACAK,OAAA;MACAM,OAAA,EAAS;QAAErB;MAAQ;IACrB;EACF,EAAE,OAAOY,KAAA,EAAO;IAAA;IAAAvD,cAAA,GAAAE,CAAA;IACdsD,OAAA,CAAQD,KAAK,CAAC,WAAWA,KAAA;IAAA;IAAAvD,cAAA,GAAAE,CAAA;IACzB,MAAMqD,KAAA;EACR;AACF;AAGO,SAASpD,eAAe;EAAE8D;AAAQ,CAAuB;EAAA;EAAAjE,cAAA,GAAAI,CAAA;EAC9D,MAAM,CAACiB,MAAA,EAAQ6C,SAAA,CAAU;EAAA;EAAA,CAAAlE,cAAA,GAAAE,CAAA,QAAG,IAAAiB,MAAA,CAAAgD,QAAQ,EAAcxD,kBAAA;EAClD,MAAM,CAACgB,YAAA,EAAcyC,eAAA,CAAgB;EAAA;EAAA,CAAApE,cAAA,GAAAE,CAAA,QAAG,IAAAiB,MAAA,CAAAgD,QAAQ,EAAU;EAC1D,MAAM,CAACvC,gBAAA,EAAkByC,mBAAA,CAAoB;EAAA;EAAA,CAAArE,cAAA,GAAAE,CAAA,QAAG,IAAAiB,MAAA,CAAAgD,QAAQ,EAAoBtD,uBAAA;EAE5E;EAAA;EAAAb,cAAA,GAAAE,CAAA;EACA,MAAMoB,OAAA,GAAU,MAAOR,IAAA;IAAA;IAAAd,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACrBkE,eAAA,CAAgB;IAAA;IAAApE,cAAA,GAAAE,CAAA;IAChB,IAAI;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACFI,MAAA,CAAOgE,IAAI,CAACxD,IAAA;MAAA;MAAA,CAAAd,cAAA,GAAA8B,CAAA,UAAO,QAAQhB,IAAA,QAAY;MAAA;MAAA,CAAAd,cAAA,GAAA8B,CAAA,UAAG,YAAW;QACnDyC,MAAA,EAAQ;QACRC,cAAA,EAAgB;UAAEC,UAAA,EAAY3D;QAAK;MACrC;MAEA,MAAM4D,eAAA;MAAA;MAAA,CAAA1E,cAAA,GAAAE,CAAA,QAAkB,MAAMoC,eAAA;MAAA;MAAAtC,cAAA,GAAAE,CAAA;MAC9BgE,SAAA,CAAUQ,eAAA;MAAA;MAAA1E,cAAA,GAAAE,CAAA;MAEVI,MAAA,CAAOgE,IAAI,CAAC,SAAS;QACnBC,MAAA,EAAQ;QACRC,cAAA,EAAgB;UAAE7B,OAAA,EAAS+B,eAAA,CAAgB/B,OAAO;UAAE8B,UAAA,EAAY3D;QAAK;MACvE;IACF,EAAE,OAAOyC,KAAA,EAAO;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MACdI,MAAA,CAAOiD,KAAK,CAAC,UAAU;QACrBgB,MAAA,EAAQ;QACRC,cAAA,EAAgB;UAAEjB,KAAA;UAAOkB,UAAA,EAAY3D;QAAK;MAC5C;IACF,UAAU;MAAA;MAAAd,cAAA,GAAAE,CAAA;MACRkE,eAAA,CAAgB;IAClB;EACF;EAEA;EAAA;EAAApE,cAAA,GAAAE,CAAA;EACA,MAAMuB,aAAA,GAAgB,MAAOX,IAAA;IAAA;IAAAd,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IAC3B,OAAOoB,OAAA,CAAQR,IAAA;EACjB;EAEA;EAAA;EAAAd,cAAA,GAAAE,CAAA;EACA,MAAMqB,UAAA,GAAa,MAAAA,CAAA;IAAA;IAAAvB,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACjB,IAAI;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACFI,MAAA,CAAOgE,IAAI,CAAC,aAAa;QACvBC,MAAA,EAAQ;MACV;MAEA;MACA,MAAME,UAAA;MAAA;MAAA,CAAAzE,cAAA,GAAAE,CAAA,QAAa,IAAAyE,cAAA,CAAAC,sBAAsB;MAAA;MAAA5E,cAAA,GAAAE,CAAA;MACzC,IAAIuE,UAAA,EAAY;QAAA;QAAAzE,cAAA,GAAA8B,CAAA;QAAA9B,cAAA,GAAAE,CAAA;QACd,MAAM,IAAAyE,cAAA,CAAAjD,gBAAuB,EAAC+C,UAAA;MAChC;MAAA;MAAA;QAAAzE,cAAA,GAAA8B,CAAA;MAAA;MAEA;MAAA9B,cAAA,GAAAE,CAAA;MACAgE,SAAA,CAAUvD,kBAAA;MAAA;MAAAX,cAAA,GAAAE,CAAA;MAEVI,MAAA,CAAOgE,IAAI,CAAC,WAAW;QACrBC,MAAA,EAAQ;MACV;IACF,EAAE,OAAOhB,KAAA,EAAO;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MACdI,MAAA,CAAOiD,KAAK,CAAC,YAAY;QACvBgB,MAAA,EAAQ;QACRC,cAAA,EAAgB;UAAEjB;QAAM;MAC1B;IACF;EACF;EAEA;EAAA;EAAAvD,cAAA,GAAAE,CAAA;EACA,MAAMwB,gBAAA,GAAmB,MAAAA,CAAA;IAAA;IAAA1B,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACvB,OAAOqB,UAAA;EACT;EAEA;EAAA;EAAAvB,cAAA,GAAAE,CAAA;EACA,MAAMsB,cAAA,GAAiB,MAAAA,CAAA;IAAA;IAAAxB,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAE,CAAA;IACrB;IAAI;IAAA,CAAAF,cAAA,GAAA8B,CAAA,YAACT,MAAA,CAAOT,WAAW;IAAA;IAAA,CAAAZ,cAAA,GAAA8B,CAAA,WAAI,CAACT,MAAA,CAAOsB,OAAO,GAAE;MAAA;MAAA3C,cAAA,GAAA8B,CAAA;MAAA9B,cAAA,GAAAE,CAAA;MAAA;IAAA;IAAA;IAAA;MAAAF,cAAA,GAAA8B,CAAA;IAAA;IAAA9B,cAAA,GAAAE,CAAA;IAE5C,IAAI;MAAA;MAAAF,cAAA,GAAAE,CAAA;MACFsD,OAAA,CAAQqB,GAAG,CAAC;MAEZ;MACA,MAAMtC,QAAA;MAAA;MAAA,CAAAvC,cAAA,GAAAE,CAAA,QAAW+B,mBAAA;MACjB,MAAMkB,UAAA;MAAA;MAAA,CAAAnD,cAAA,GAAAE,CAAA,QAAa,MAAMqC,QAAA,CAASa,UAAU,CAAC/B,MAAA,CAAOsB,OAAO;MAE3D,IAAIU,SAAA;MAAA;MAAA,CAAArD,cAAA,GAAAE,CAAA,QAAY;MAAA;MAAAF,cAAA,GAAAE,CAAA;MAChB,IAAI;QAAA;QAAAF,cAAA,GAAAE,CAAA;QACFmD,SAAA,GAAY,MAAMJ,gBAAA,CAAAzC,OAAe,CAAC8C,eAAe,CAACjC,MAAA,CAAOsB,OAAO;MAClE,EAAE,OAAOY,KAAA,EAAO;QAAA;QAAAvD,cAAA,GAAAE,CAAA;QACdsD,OAAA,CAAQC,IAAI,CAAC,cAAcF,KAAA;MAC7B;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MAEAgE,SAAA,CAAUY,IAAA,IAAS;QAAA;QAAA9E,cAAA,GAAAI,CAAA;QAAAJ,cAAA,GAAAE,CAAA;QAAA;UACjB,GAAG4E,IAAI;UACPlB,OAAA,EAAS;YACPC,GAAA,EAAK,IAAA1B,OAAA,CAAA2B,WAAW,EAACX,UAAA;YACjBY,EAAA,EAAIV;UACN;QACF;MAAA;MAAA;MAAArD,cAAA,GAAAE,CAAA;MAEAsD,OAAA,CAAQqB,GAAG,CAAC;IACd,EAAE,OAAOtB,KAAA,EAAO;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MACdsD,OAAA,CAAQD,KAAK,CAAC,WAAWA,KAAA;IAC3B;EACF;EAAA;EAAAvD,cAAA,GAAAE,CAAA;EAEA,oBACE,IAAA6E,WAAA,CAAAC,GAAA,EAAC9D,aAAA,CAAc+D,QAAQ;IAACC,KAAA,EAAO;MAC7B7D,MAAA;MACAC,OAAA;MACAC,UAAA;MACAC,cAAA;MACAC,aAAA;MACAC,gBAAA;MACAC,YAAA;MACAC;IACF;cACGqC;;AAGP;AAGO,SAAS5D,UAAA;EAAA;EAAAL,cAAA,GAAAI,CAAA;EAAAJ,cAAA,GAAAE,CAAA;EACd,OAAO,IAAAiB,MAAA,CAAAgE,UAAU,EAACjE,aAAA;AACpB","ignoreList":[]}