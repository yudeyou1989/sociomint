{"version":3,"names":["_default","logger","cov_1ohinu3war","s","_logger","default","createContextLogger","component","BlockchainMonitorProvider","children","enableMonitoring","b","f","_react","useEffect","info","tokenUnwatch","exchangeUnwatch","setupMonitoring","_blockchainMonitor","monitorTokenEvents","monitorExchangeEvents","error","action","additionalData","_jsxruntime","jsx","Fragment"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/providers/BlockchainMonitorProvider.tsx"],"sourcesContent":["'use client';\n\nimport { ReactNode, useEffect } from 'react';\nimport BlockchainMonitor from '@/services/blockchainMonitor';\nimport Logger from '@/services/logger';\n\ninterface BlockchainMonitorProviderProps {\n  children: ReactNode;\n  enableMonitoring?: boolean;\n}\n\n// 创建日志记录器\nconst logger = Logger.createContextLogger({ component: 'BlockchainMonitorProvider' });\n\n/**\n * 区块链监控提供者组件\n * \n * 初始化区块链事件监控并提供监控上下文\n */\nconst BlockchainMonitorProvider = ({ \n  children, \n  enableMonitoring = true \n}: BlockchainMonitorProviderProps) => {\n  useEffect(() => {\n    if (!enableMonitoring) {\n      logger.info('Blockchain monitoring disabled');\n      return;\n    }\n\n    let tokenUnwatch: (() => void) | undefined;\n    let exchangeUnwatch: (() => void) | undefined;\n\n    const setupMonitoring = async () => {\n      try {\n        logger.info('Setting up blockchain monitoring');\n        \n        // 监控代币合约事件\n        tokenUnwatch = await BlockchainMonitor.monitorTokenEvents();\n        \n        // 监控交换合约事件\n        exchangeUnwatch = await BlockchainMonitor.monitorExchangeEvents();\n        \n        logger.info('Blockchain monitoring initialized successfully');\n      } catch (error) {\n        logger.error('Failed to initialize blockchain monitoring', {\n          action: 'setupMonitoring',\n          additionalData: { error },\n        });\n      }\n    };\n\n    setupMonitoring();\n\n    // 清理函数\n    return () => {\n      logger.info('Cleaning up blockchain monitoring');\n      \n      if (tokenUnwatch) {\n        tokenUnwatch();\n      }\n      \n      if (exchangeUnwatch) {\n        exchangeUnwatch();\n      }\n    };\n  }, [enableMonitoring]);\n\n  return <>{children}</>;\n};\n\nexport default BlockchainMonitorProvider;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAsEA;;;;;;WAAAA,QAAA;;;;;;;;kCApEqC;;;wEACP;;;wEACX;;;;;;;;;;;;;;;AAOnB;AACA,MAAMC,MAAA;AAAA;AAAA,CAAAC,cAAA,GAAAC,CAAA,OAASC,OAAA,CAAAC,OAAM,CAACC,mBAAmB,CAAC;EAAEC,SAAA,EAAW;AAA4B;AAEnF;;;;;AAAA;AAAAL,cAAA,GAAAC,CAAA;AAKA,MAAMK,yBAAA,GAA4BA,CAAC;EACjCC,QAAQ;EACRC,gBAAA;EAAA;EAAA,CAAAR,cAAA,GAAAS,CAAA,UAAmB,IAAI;AAAA,CACQ;EAAA;EAAAT,cAAA,GAAAU,CAAA;EAAAV,cAAA,GAAAC,CAAA;EAC/B,IAAAU,MAAA,CAAAC,SAAS,EAAC;IAAA;IAAAZ,cAAA,GAAAU,CAAA;IAAAV,cAAA,GAAAC,CAAA;IACR,IAAI,CAACO,gBAAA,EAAkB;MAAA;MAAAR,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAC,CAAA;MACrBF,MAAA,CAAOc,IAAI,CAAC;MAAA;MAAAb,cAAA,GAAAC,CAAA;MACZ;IACF;IAAA;IAAA;MAAAD,cAAA,GAAAS,CAAA;IAAA;IAEA,IAAIK,YAAA;IACJ,IAAIC,eAAA;IAAA;IAAAf,cAAA,GAAAC,CAAA;IAEJ,MAAMe,eAAA,GAAkB,MAAAA,CAAA;MAAA;MAAAhB,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAC,CAAA;MACtB,IAAI;QAAA;QAAAD,cAAA,GAAAC,CAAA;QACFF,MAAA,CAAOc,IAAI,CAAC;QAEZ;QAAA;QAAAb,cAAA,GAAAC,CAAA;QACAa,YAAA,GAAe,MAAMG,kBAAA,CAAAd,OAAiB,CAACe,kBAAkB;QAEzD;QAAA;QAAAlB,cAAA,GAAAC,CAAA;QACAc,eAAA,GAAkB,MAAME,kBAAA,CAAAd,OAAiB,CAACgB,qBAAqB;QAAA;QAAAnB,cAAA,GAAAC,CAAA;QAE/DF,MAAA,CAAOc,IAAI,CAAC;MACd,EAAE,OAAOO,KAAA,EAAO;QAAA;QAAApB,cAAA,GAAAC,CAAA;QACdF,MAAA,CAAOqB,KAAK,CAAC,8CAA8C;UACzDC,MAAA,EAAQ;UACRC,cAAA,EAAgB;YAAEF;UAAM;QAC1B;MACF;IACF;IAAA;IAAApB,cAAA,GAAAC,CAAA;IAEAe,eAAA;IAEA;IAAA;IAAAhB,cAAA,GAAAC,CAAA;IACA,OAAO;MAAA;MAAAD,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAC,CAAA;MACLF,MAAA,CAAOc,IAAI,CAAC;MAAA;MAAAb,cAAA,GAAAC,CAAA;MAEZ,IAAIa,YAAA,EAAc;QAAA;QAAAd,cAAA,GAAAS,CAAA;QAAAT,cAAA,GAAAC,CAAA;QAChBa,YAAA;MACF;MAAA;MAAA;QAAAd,cAAA,GAAAS,CAAA;MAAA;MAAAT,cAAA,GAAAC,CAAA;MAEA,IAAIc,eAAA,EAAiB;QAAA;QAAAf,cAAA,GAAAS,CAAA;QAAAT,cAAA,GAAAC,CAAA;QACnBc,eAAA;MACF;MAAA;MAAA;QAAAf,cAAA,GAAAS,CAAA;MAAA;IACF;EACF,GAAG,CAACD,gBAAA,CAAiB;EAAA;EAAAR,cAAA,GAAAC,CAAA;EAErB,oBAAO,IAAAsB,WAAA,CAAAC,GAAA,EAAAD,WAAA,CAAAE,QAAA;cAAGlB;;AACZ;MAEAT,QAAA;AAAA;AAAA,CAAAE,cAAA,GAAAC,CAAA,QAAeK,yBAAA","ignoreList":[]}