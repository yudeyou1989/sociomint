f6768ec82d9a3fc250ff1ddc3dd23012
'use client';
"use strict";

/* istanbul ignore next */
function cov_d4c3s0gg7() {
  var path = "/Users/yudeyou/Desktop/sm/sociomint/src/useSMExchange.ts";
  var hash = "1f779a54d4f89cd06f41efd3b7b116eea3c7a4bf";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/yudeyou/Desktop/sm/sociomint/src/useSMExchange.ts",
    statementMap: {
      "0": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 5,
          column: 3
        }
      },
      "1": {
        start: {
          line: 6,
          column: 0
        },
        end: {
          line: 11,
          column: 3
        }
      },
      "2": {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 9,
          column: 29
        }
      },
      "3": {
        start: {
          line: 12,
          column: 15
        },
        end: {
          line: 12,
          column: 31
        }
      },
      "4": {
        start: {
          line: 13,
          column: 14
        },
        end: {
          line: 13,
          column: 29
        }
      },
      "5": {
        start: {
          line: 14,
          column: 19
        },
        end: {
          line: 14,
          column: 51
        }
      },
      "6": {
        start: {
          line: 16,
          column: 37
        },
        end: {
          line: 16,
          column: 61
        }
      },
      "7": {
        start: {
          line: 18,
          column: 113
        },
        end: {
          line: 23,
          column: 6
        }
      },
      "8": {
        start: {
          line: 25,
          column: 28
        },
        end: {
          line: 25,
          column: 72
        }
      },
      "9": {
        start: {
          line: 26,
          column: 33
        },
        end: {
          line: 26,
          column: 77
        }
      },
      "10": {
        start: {
          line: 27,
          column: 27
        },
        end: {
          line: 27,
          column: 71
        }
      },
      "11": {
        start: {
          line: 28,
          column: 25
        },
        end: {
          line: 28,
          column: 69
        }
      },
      "12": {
        start: {
          line: 29,
          column: 27
        },
        end: {
          line: 29,
          column: 71
        }
      },
      "13": {
        start: {
          line: 31,
          column: 109
        },
        end: {
          line: 39,
          column: 6
        }
      },
      "14": {
        start: {
          line: 41,
          column: 27
        },
        end: {
          line: 41,
          column: 61
        }
      },
      "15": {
        start: {
          line: 42,
          column: 23
        },
        end: {
          line: 42,
          column: 53
        }
      },
      "16": {
        start: {
          line: 43,
          column: 29
        },
        end: {
          line: 43,
          column: 63
        }
      },
      "17": {
        start: {
          line: 44,
          column: 29
        },
        end: {
          line: 44,
          column: 59
        }
      },
      "18": {
        start: {
          line: 46,
          column: 135
        },
        end: {
          line: 50,
          column: 6
        }
      },
      "19": {
        start: {
          line: 52,
          column: 77
        },
        end: {
          line: 54,
          column: 6
        }
      },
      "20": {
        start: {
          line: 56,
          column: 33
        },
        end: {
          line: 68,
          column: 5
        }
      },
      "21": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 59,
          column: 9
        }
      },
      "22": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 23
        }
      },
      "23": {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 67,
          column: 9
        }
      },
      "24": {
        start: {
          line: 61,
          column: 29
        },
        end: {
          line: 61,
          column: 61
        }
      },
      "25": {
        start: {
          line: 62,
          column: 32
        },
        end: {
          line: 62,
          column: 74
        }
      },
      "26": {
        start: {
          line: 63,
          column: 12
        },
        end: {
          line: 63,
          column: 63
        }
      },
      "27": {
        start: {
          line: 65,
          column: 12
        },
        end: {
          line: 65,
          column: 46
        }
      },
      "28": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 66,
          column: 23
        }
      },
      "29": {
        start: {
          line: 70,
          column: 28
        },
        end: {
          line: 81,
          column: 5
        }
      },
      "30": {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 71,
          column: 37
        }
      },
      "31": {
        start: {
          line: 71,
          column: 24
        },
        end: {
          line: 71,
          column: 37
        }
      },
      "32": {
        start: {
          line: 72,
          column: 8
        },
        end: {
          line: 80,
          column: 9
        }
      },
      "33": {
        start: {
          line: 73,
          column: 12
        },
        end: {
          line: 75,
          column: 15
        }
      },
      "34": {
        start: {
          line: 76,
          column: 12
        },
        end: {
          line: 76,
          column: 24
        }
      },
      "35": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 78,
          column: 44
        }
      },
      "36": {
        start: {
          line: 79,
          column: 12
        },
        end: {
          line: 79,
          column: 25
        }
      },
      "37": {
        start: {
          line: 82,
          column: 4
        },
        end: {
          line: 111,
          column: 6
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 9
          },
          end: {
            line: 8,
            column: 10
          }
        },
        loc: {
          start: {
            line: 8,
            column: 20
          },
          end: {
            line: 10,
            column: 5
          }
        },
        line: 8
      },
      "1": {
        name: "useSMExchange",
        decl: {
          start: {
            line: 15,
            column: 9
          },
          end: {
            line: 15,
            column: 22
          }
        },
        loc: {
          start: {
            line: 15,
            column: 25
          },
          end: {
            line: 112,
            column: 1
          }
        },
        line: 15
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 56,
            column: 33
          },
          end: {
            line: 56,
            column: 34
          }
        },
        loc: {
          start: {
            line: 56,
            column: 46
          },
          end: {
            line: 68,
            column: 5
          }
        },
        line: 56
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 70,
            column: 28
          },
          end: {
            line: 70,
            column: 29
          }
        },
        loc: {
          start: {
            line: 70,
            column: 47
          },
          end: {
            line: 81,
            column: 5
          }
        },
        line: 70
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 25,
            column: 28
          },
          end: {
            line: 25,
            column: 72
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 25,
            column: 44
          },
          end: {
            line: 25,
            column: 60
          }
        }, {
          start: {
            line: 25,
            column: 63
          },
          end: {
            line: 25,
            column: 72
          }
        }],
        line: 25
      },
      "1": {
        loc: {
          start: {
            line: 26,
            column: 33
          },
          end: {
            line: 26,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 26,
            column: 49
          },
          end: {
            line: 26,
            column: 65
          }
        }, {
          start: {
            line: 26,
            column: 68
          },
          end: {
            line: 26,
            column: 77
          }
        }],
        line: 26
      },
      "2": {
        loc: {
          start: {
            line: 27,
            column: 27
          },
          end: {
            line: 27,
            column: 71
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 27,
            column: 43
          },
          end: {
            line: 27,
            column: 59
          }
        }, {
          start: {
            line: 27,
            column: 62
          },
          end: {
            line: 27,
            column: 71
          }
        }],
        line: 27
      },
      "3": {
        loc: {
          start: {
            line: 28,
            column: 25
          },
          end: {
            line: 28,
            column: 69
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 28,
            column: 41
          },
          end: {
            line: 28,
            column: 57
          }
        }, {
          start: {
            line: 28,
            column: 60
          },
          end: {
            line: 28,
            column: 69
          }
        }],
        line: 28
      },
      "4": {
        loc: {
          start: {
            line: 29,
            column: 27
          },
          end: {
            line: 29,
            column: 71
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 29,
            column: 43
          },
          end: {
            line: 29,
            column: 59
          }
        }, {
          start: {
            line: 29,
            column: 62
          },
          end: {
            line: 29,
            column: 71
          }
        }],
        line: 29
      },
      "5": {
        loc: {
          start: {
            line: 35,
            column: 14
          },
          end: {
            line: 37,
            column: 21
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 35,
            column: 24
          },
          end: {
            line: 37,
            column: 9
          }
        }, {
          start: {
            line: 37,
            column: 12
          },
          end: {
            line: 37,
            column: 21
          }
        }],
        line: 35
      },
      "6": {
        loc: {
          start: {
            line: 38,
            column: 17
          },
          end: {
            line: 38,
            column: 41
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 38,
            column: 17
          },
          end: {
            line: 38,
            column: 28
          }
        }, {
          start: {
            line: 38,
            column: 32
          },
          end: {
            line: 38,
            column: 41
          }
        }],
        line: 38
      },
      "7": {
        loc: {
          start: {
            line: 41,
            column: 27
          },
          end: {
            line: 41,
            column: 61
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 41,
            column: 38
          },
          end: {
            line: 41,
            column: 49
          }
        }, {
          start: {
            line: 41,
            column: 52
          },
          end: {
            line: 41,
            column: 61
          }
        }],
        line: 41
      },
      "8": {
        loc: {
          start: {
            line: 42,
            column: 23
          },
          end: {
            line: 42,
            column: 53
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 42,
            column: 34
          },
          end: {
            line: 42,
            column: 45
          }
        }, {
          start: {
            line: 42,
            column: 48
          },
          end: {
            line: 42,
            column: 53
          }
        }],
        line: 42
      },
      "9": {
        loc: {
          start: {
            line: 43,
            column: 29
          },
          end: {
            line: 43,
            column: 63
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 43,
            column: 40
          },
          end: {
            line: 43,
            column: 59
          }
        }, {
          start: {
            line: 43,
            column: 62
          },
          end: {
            line: 43,
            column: 63
          }
        }],
        line: 43
      },
      "10": {
        loc: {
          start: {
            line: 44,
            column: 29
          },
          end: {
            line: 44,
            column: 59
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 44,
            column: 40
          },
          end: {
            line: 44,
            column: 51
          }
        }, {
          start: {
            line: 44,
            column: 54
          },
          end: {
            line: 44,
            column: 59
          }
        }],
        line: 44
      },
      "11": {
        loc: {
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 59,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "12": {
        loc: {
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 57,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 57,
            column: 12
          },
          end: {
            line: 57,
            column: 22
          }
        }, {
          start: {
            line: 57,
            column: 26
          },
          end: {
            line: 57,
            column: 39
          }
        }, {
          start: {
            line: 57,
            column: 43
          },
          end: {
            line: 57,
            column: 77
          }
        }],
        line: 57
      },
      "13": {
        loc: {
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 71,
            column: 37
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 71,
            column: 8
          },
          end: {
            line: 71,
            column: 37
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 71
      },
      "14": {
        loc: {
          start: {
            line: 102,
            column: 22
          },
          end: {
            line: 102,
            column: 55
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 102,
            column: 22
          },
          end: {
            line: 102,
            column: 34
          }
        }, {
          start: {
            line: 102,
            column: 38
          },
          end: {
            line: 102,
            column: 55
          }
        }],
        line: 102
      },
      "15": {
        loc: {
          start: {
            line: 103,
            column: 27
          },
          end: {
            line: 103,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 103,
            column: 27
          },
          end: {
            line: 103,
            column: 44
          }
        }, {
          start: {
            line: 103,
            column: 48
          },
          end: {
            line: 103,
            column: 67
          }
        }],
        line: 103
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/yudeyou/Desktop/sm/sociomint/src/useSMExchange.ts"],
      sourcesContent: ["'use client';\n\nimport { useAccount, useContractRead, useContractWrite, useWaitForTransaction } from 'wagmi';\nimport { parseEther } from 'viem';\nimport { CONTRACT_ADDRESSES, SM_EXCHANGE_ABI } from '@/constants/contracts';\n\nexport function useSMExchange() {\n  const { address, isConnected } = useAccount();\n\n  // \u83B7\u53D6\u4EA4\u6613\u6240\u7EDF\u8BA1\u4FE1\u606F\n  const { \n    data: exchangeStats, \n    refetch: refetchExchangeStats,\n    isLoading: isLoadingStats,\n    error: statsError\n  } = useContractRead({\n    address: CONTRACT_ADDRESSES.exchange as `0x${string}`,\n    abi: SM_EXCHANGE_ABI,\n    functionName: 'getExchangeStats',\n    enabled: isConnected,\n  });\n\n  // \u89E3\u6790\u4EA4\u6613\u6240\u7EDF\u8BA1\u4FE1\u606F\n  const totalTokensSold = exchangeStats ? exchangeStats[0] : BigInt(0);\n  const totalTokensRemaining = exchangeStats ? exchangeStats[1] : BigInt(0);\n  const totalBnbRaised = exchangeStats ? exchangeStats[2] : BigInt(0);\n  const currentPrice = exchangeStats ? exchangeStats[3] : BigInt(0);\n  const nextRoundPrice = exchangeStats ? exchangeStats[4] : BigInt(0);\n\n  // \u83B7\u53D6\u7528\u6237\u6570\u636E\n  const { \n    data: userData, \n    refetch: refetchUserData,\n    isLoading: isLoadingUserData,\n    error: userDataError\n  } = useContractRead({\n    address: CONTRACT_ADDRESSES.exchange as `0x${string}`,\n    abi: SM_EXCHANGE_ABI,\n    functionName: 'userData',\n    args: address ? [address] : undefined,\n    enabled: isConnected && !!address,\n  });\n\n  // \u89E3\u6790\u7528\u6237\u6570\u636E\n  const totalPurchases = userData ? userData[0] : BigInt(0);\n  const isVerified = userData ? userData[1] : false;\n  const lastPurchaseTime = userData ? Number(userData[2]) : 0;\n  const hasRefundRequest = userData ? userData[3] : false;\n\n  // \u5151\u6362\u4EE3\u5E01\u51FD\u6570\n  const { \n    data: exchangeData,\n    write: exchangeTokens,\n    isLoading: isExchanging,\n    isSuccess: isExchangeSuccess,\n    error: exchangeError\n  } = useContractWrite({\n    address: CONTRACT_ADDRESSES.exchange as `0x${string}`,\n    abi: SM_EXCHANGE_ABI,\n    functionName: 'exchangeTokens',\n  });\n\n  // \u7B49\u5F85\u5151\u6362\u4EA4\u6613\u786E\u8BA4\n  const { \n    isLoading: isExchangePending,\n    isSuccess: isExchangeConfirmed\n  } = useWaitForTransaction({\n    hash: exchangeData?.hash,\n  });\n\n  // \u8BA1\u7B97BNB\u53EF\u83B7\u5F97\u7684\u4EE3\u5E01\u6570\u91CF\n  const calculateTokenAmount = (bnbAmount: string) => {\n    if (!bnbAmount || !currentPrice || BigInt(currentPrice) === BigInt(0)) {\n      return '0';\n    }\n    \n    try {\n      const bnbValue = parseEther(bnbAmount);\n      const tokenAmount = bnbValue * BigInt(10**18) / currentPrice;\n      return (Number(tokenAmount) / 10**18).toFixed(2);\n    } catch (error) {\n      console.error('\u8BA1\u7B97\u4EE3\u5E01\u6570\u91CF\u9519\u8BEF:', error);\n      return '0';\n    }\n  };\n\n  // \u6267\u884C\u5151\u6362\u4EE3\u5E01\n  const performExchange = async (bnbAmount: string) => {\n    if (!bnbAmount) return false;\n    \n    try {\n      exchangeTokens({\n        value: parseEther(bnbAmount),\n      });\n      return true;\n    } catch (error) {\n      console.error('\u5151\u6362\u4EE3\u5E01\u9519\u8BEF:', error);\n      return false;\n    }\n  };\n\n  return {\n    // \u4EA4\u6613\u6240\u72B6\u6001\n    totalTokensSold,\n    totalTokensRemaining,\n    totalBnbRaised,\n    currentPrice,\n    nextRoundPrice,\n    refetchExchangeStats,\n    isLoadingStats,\n    statsError,\n    \n    // \u7528\u6237\u6570\u636E\n    totalPurchases,\n    isVerified,\n    lastPurchaseTime,\n    hasRefundRequest,\n    refetchUserData,\n    isLoadingUserData,\n    userDataError,\n    \n    // \u5151\u6362\u529F\u80FD\n    exchangeTokens: performExchange,\n    isExchanging: isExchanging || isExchangePending,\n    isExchangeSuccess: isExchangeSuccess && isExchangeConfirmed,\n    exchangeError,\n    exchangeTxHash: exchangeData?.hash,\n    \n    // \u5DE5\u5177\u51FD\u6570\n    calculateTokenAmount,\n    \n    // \u8FDE\u63A5\u72B6\u6001\n    isConnected,\n    address\n  };\n}\n"],
      names: ["useSMExchange", "address", "isConnected", "useAccount", "data", "exchangeStats", "refetch", "refetchExchangeStats", "isLoading", "isLoadingStats", "error", "statsError", "useContractRead", "CONTRACT_ADDRESSES", "exchange", "abi", "SM_EXCHANGE_ABI", "functionName", "enabled", "totalTokensSold", "BigInt", "totalTokensRemaining", "totalBnbRaised", "currentPrice", "nextRoundPrice", "userData", "refetchUserData", "isLoadingUserData", "userDataError", "args", "undefined", "totalPurchases", "isVerified", "lastPurchaseTime", "Number", "hasRefundRequest", "exchangeData", "write", "exchangeTokens", "isExchanging", "isSuccess", "isExchangeSuccess", "exchangeError", "useContractWrite", "isExchangePending", "isExchangeConfirmed", "useWaitForTransaction", "hash", "calculateTokenAmount", "bnbAmount", "bnbValue", "parseEther", "tokenAmount", "toFixed", "console", "performExchange", "value", "exchangeTxHash"],
      mappings: "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"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "1f779a54d4f89cd06f41efd3b7b116eea3c7a4bf"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_d4c3s0gg7 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_d4c3s0gg7();
cov_d4c3s0gg7().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_d4c3s0gg7().s[1]++;
Object.defineProperty(exports, "useSMExchange", {
  enumerable: true,
  get: function () {
    /* istanbul ignore next */
    cov_d4c3s0gg7().f[0]++;
    cov_d4c3s0gg7().s[2]++;
    return useSMExchange;
  }
});
const _wagmi =
/* istanbul ignore next */
(cov_d4c3s0gg7().s[3]++, require("wagmi"));
const _viem =
/* istanbul ignore next */
(cov_d4c3s0gg7().s[4]++, require("viem"));
const _contracts =
/* istanbul ignore next */
(cov_d4c3s0gg7().s[5]++, require("./constants/contracts"));
function useSMExchange() {
  /* istanbul ignore next */
  cov_d4c3s0gg7().f[1]++;
  const {
    address,
    isConnected
  } =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[6]++, (0, _wagmi.useAccount)());
  // 获取交易所统计信息
  const {
    data: exchangeStats,
    refetch: refetchExchangeStats,
    isLoading: isLoadingStats,
    error: statsError
  } =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[7]++, (0, _wagmi.useContractRead)({
    address: _contracts.CONTRACT_ADDRESSES.exchange,
    abi: _contracts.SM_EXCHANGE_ABI,
    functionName: 'getExchangeStats',
    enabled: isConnected
  }));
  // 解析交易所统计信息
  const totalTokensSold =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[8]++, exchangeStats ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[0][0]++, exchangeStats[0]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[0][1]++, BigInt(0)));
  const totalTokensRemaining =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[9]++, exchangeStats ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[1][0]++, exchangeStats[1]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[1][1]++, BigInt(0)));
  const totalBnbRaised =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[10]++, exchangeStats ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[2][0]++, exchangeStats[2]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[2][1]++, BigInt(0)));
  const currentPrice =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[11]++, exchangeStats ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[3][0]++, exchangeStats[3]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[3][1]++, BigInt(0)));
  const nextRoundPrice =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[12]++, exchangeStats ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[4][0]++, exchangeStats[4]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[4][1]++, BigInt(0)));
  // 获取用户数据
  const {
    data: userData,
    refetch: refetchUserData,
    isLoading: isLoadingUserData,
    error: userDataError
  } =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[13]++, (0, _wagmi.useContractRead)({
    address: _contracts.CONTRACT_ADDRESSES.exchange,
    abi: _contracts.SM_EXCHANGE_ABI,
    functionName: 'userData',
    args: address ?
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[5][0]++, [address]) :
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[5][1]++, undefined),
    enabled:
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[6][0]++, isConnected) &&
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[6][1]++, !!address)
  }));
  // 解析用户数据
  const totalPurchases =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[14]++, userData ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[7][0]++, userData[0]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[7][1]++, BigInt(0)));
  const isVerified =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[15]++, userData ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[8][0]++, userData[1]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[8][1]++, false));
  const lastPurchaseTime =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[16]++, userData ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[9][0]++, Number(userData[2])) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[9][1]++, 0));
  const hasRefundRequest =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[17]++, userData ?
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[10][0]++, userData[3]) :
  /* istanbul ignore next */
  (cov_d4c3s0gg7().b[10][1]++, false));
  // 兑换代币函数
  const {
    data: exchangeData,
    write: exchangeTokens,
    isLoading: isExchanging,
    isSuccess: isExchangeSuccess,
    error: exchangeError
  } =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[18]++, (0, _wagmi.useContractWrite)({
    address: _contracts.CONTRACT_ADDRESSES.exchange,
    abi: _contracts.SM_EXCHANGE_ABI,
    functionName: 'exchangeTokens'
  }));
  // 等待兑换交易确认
  const {
    isLoading: isExchangePending,
    isSuccess: isExchangeConfirmed
  } =
  /* istanbul ignore next */
  (cov_d4c3s0gg7().s[19]++, (0, _wagmi.useWaitForTransaction)({
    hash: exchangeData?.hash
  }));
  // 计算BNB可获得的代币数量
  /* istanbul ignore next */
  cov_d4c3s0gg7().s[20]++;
  const calculateTokenAmount = bnbAmount => {
    /* istanbul ignore next */
    cov_d4c3s0gg7().f[2]++;
    cov_d4c3s0gg7().s[21]++;
    if (
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[12][0]++, !bnbAmount) ||
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[12][1]++, !currentPrice) ||
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[12][2]++, BigInt(currentPrice) === BigInt(0))) {
      /* istanbul ignore next */
      cov_d4c3s0gg7().b[11][0]++;
      cov_d4c3s0gg7().s[22]++;
      return '0';
    } else
    /* istanbul ignore next */
    {
      cov_d4c3s0gg7().b[11][1]++;
    }
    cov_d4c3s0gg7().s[23]++;
    try {
      const bnbValue =
      /* istanbul ignore next */
      (cov_d4c3s0gg7().s[24]++, (0, _viem.parseEther)(bnbAmount));
      const tokenAmount =
      /* istanbul ignore next */
      (cov_d4c3s0gg7().s[25]++, bnbValue * BigInt(10 ** 18) / currentPrice);
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[26]++;
      return (Number(tokenAmount) / 10 ** 18).toFixed(2);
    } catch (error) {
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[27]++;
      console.error('计算代币数量错误:', error);
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[28]++;
      return '0';
    }
  };
  // 执行兑换代币
  /* istanbul ignore next */
  cov_d4c3s0gg7().s[29]++;
  const performExchange = async bnbAmount => {
    /* istanbul ignore next */
    cov_d4c3s0gg7().f[3]++;
    cov_d4c3s0gg7().s[30]++;
    if (!bnbAmount) {
      /* istanbul ignore next */
      cov_d4c3s0gg7().b[13][0]++;
      cov_d4c3s0gg7().s[31]++;
      return false;
    } else
    /* istanbul ignore next */
    {
      cov_d4c3s0gg7().b[13][1]++;
    }
    cov_d4c3s0gg7().s[32]++;
    try {
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[33]++;
      exchangeTokens({
        value: (0, _viem.parseEther)(bnbAmount)
      });
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[34]++;
      return true;
    } catch (error) {
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[35]++;
      console.error('兑换代币错误:', error);
      /* istanbul ignore next */
      cov_d4c3s0gg7().s[36]++;
      return false;
    }
  };
  /* istanbul ignore next */
  cov_d4c3s0gg7().s[37]++;
  return {
    // 交易所状态
    totalTokensSold,
    totalTokensRemaining,
    totalBnbRaised,
    currentPrice,
    nextRoundPrice,
    refetchExchangeStats,
    isLoadingStats,
    statsError,
    // 用户数据
    totalPurchases,
    isVerified,
    lastPurchaseTime,
    hasRefundRequest,
    refetchUserData,
    isLoadingUserData,
    userDataError,
    // 兑换功能
    exchangeTokens: performExchange,
    isExchanging:
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[14][0]++, isExchanging) ||
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[14][1]++, isExchangePending),
    isExchangeSuccess:
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[15][0]++, isExchangeSuccess) &&
    /* istanbul ignore next */
    (cov_d4c3s0gg7().b[15][1]++, isExchangeConfirmed),
    exchangeError,
    exchangeTxHash: exchangeData?.hash,
    // 工具函数
    calculateTokenAmount,
    // 连接状态
    isConnected,
    address
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfZDRjM3MwZ2c3IiwiYWN0dWFsQ292ZXJhZ2UiLCJzIiwidXNlU01FeGNoYW5nZSIsImYiLCJhZGRyZXNzIiwiaXNDb25uZWN0ZWQiLCJfd2FnbWkiLCJ1c2VBY2NvdW50IiwiZGF0YSIsImV4Y2hhbmdlU3RhdHMiLCJyZWZldGNoIiwicmVmZXRjaEV4Y2hhbmdlU3RhdHMiLCJpc0xvYWRpbmciLCJpc0xvYWRpbmdTdGF0cyIsImVycm9yIiwic3RhdHNFcnJvciIsInVzZUNvbnRyYWN0UmVhZCIsIl9jb250cmFjdHMiLCJDT05UUkFDVF9BRERSRVNTRVMiLCJleGNoYW5nZSIsImFiaSIsIlNNX0VYQ0hBTkdFX0FCSSIsImZ1bmN0aW9uTmFtZSIsImVuYWJsZWQiLCJ0b3RhbFRva2Vuc1NvbGQiLCJiIiwiQmlnSW50IiwidG90YWxUb2tlbnNSZW1haW5pbmciLCJ0b3RhbEJuYlJhaXNlZCIsImN1cnJlbnRQcmljZSIsIm5leHRSb3VuZFByaWNlIiwidXNlckRhdGEiLCJyZWZldGNoVXNlckRhdGEiLCJpc0xvYWRpbmdVc2VyRGF0YSIsInVzZXJEYXRhRXJyb3IiLCJhcmdzIiwidW5kZWZpbmVkIiwidG90YWxQdXJjaGFzZXMiLCJpc1ZlcmlmaWVkIiwibGFzdFB1cmNoYXNlVGltZSIsIk51bWJlciIsImhhc1JlZnVuZFJlcXVlc3QiLCJleGNoYW5nZURhdGEiLCJ3cml0ZSIsImV4Y2hhbmdlVG9rZW5zIiwiaXNFeGNoYW5naW5nIiwiaXNTdWNjZXNzIiwiaXNFeGNoYW5nZVN1Y2Nlc3MiLCJleGNoYW5nZUVycm9yIiwidXNlQ29udHJhY3RXcml0ZSIsImlzRXhjaGFuZ2VQZW5kaW5nIiwiaXNFeGNoYW5nZUNvbmZpcm1lZCIsInVzZVdhaXRGb3JUcmFuc2FjdGlvbiIsImhhc2giLCJjYWxjdWxhdGVUb2tlbkFtb3VudCIsImJuYkFtb3VudCIsImJuYlZhbHVlIiwiX3ZpZW0iLCJwYXJzZUV0aGVyIiwidG9rZW5BbW91bnQiLCJ0b0ZpeGVkIiwiY29uc29sZSIsInBlcmZvcm1FeGNoYW5nZSIsInZhbHVlIiwiZXhjaGFuZ2VUeEhhc2giXSwic291cmNlcyI6WyIvVXNlcnMveXVkZXlvdS9EZXNrdG9wL3NtL3NvY2lvbWludC9zcmMvdXNlU01FeGNoYW5nZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUFjY291bnQsIHVzZUNvbnRyYWN0UmVhZCwgdXNlQ29udHJhY3RXcml0ZSwgdXNlV2FpdEZvclRyYW5zYWN0aW9uIH0gZnJvbSAnd2FnbWknO1xuaW1wb3J0IHsgcGFyc2VFdGhlciB9IGZyb20gJ3ZpZW0nO1xuaW1wb3J0IHsgQ09OVFJBQ1RfQUREUkVTU0VTLCBTTV9FWENIQU5HRV9BQkkgfSBmcm9tICdAL2NvbnN0YW50cy9jb250cmFjdHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU01FeGNoYW5nZSgpIHtcbiAgY29uc3QgeyBhZGRyZXNzLCBpc0Nvbm5lY3RlZCB9ID0gdXNlQWNjb3VudCgpO1xuXG4gIC8vIOiOt+WPluS6pOaYk+aJgOe7n+iuoeS/oeaBr1xuICBjb25zdCB7IFxuICAgIGRhdGE6IGV4Y2hhbmdlU3RhdHMsIFxuICAgIHJlZmV0Y2g6IHJlZmV0Y2hFeGNoYW5nZVN0YXRzLFxuICAgIGlzTG9hZGluZzogaXNMb2FkaW5nU3RhdHMsXG4gICAgZXJyb3I6IHN0YXRzRXJyb3JcbiAgfSA9IHVzZUNvbnRyYWN0UmVhZCh7XG4gICAgYWRkcmVzczogQ09OVFJBQ1RfQUREUkVTU0VTLmV4Y2hhbmdlIGFzIGAweCR7c3RyaW5nfWAsXG4gICAgYWJpOiBTTV9FWENIQU5HRV9BQkksXG4gICAgZnVuY3Rpb25OYW1lOiAnZ2V0RXhjaGFuZ2VTdGF0cycsXG4gICAgZW5hYmxlZDogaXNDb25uZWN0ZWQsXG4gIH0pO1xuXG4gIC8vIOino+aekOS6pOaYk+aJgOe7n+iuoeS/oeaBr1xuICBjb25zdCB0b3RhbFRva2Vuc1NvbGQgPSBleGNoYW5nZVN0YXRzID8gZXhjaGFuZ2VTdGF0c1swXSA6IEJpZ0ludCgwKTtcbiAgY29uc3QgdG90YWxUb2tlbnNSZW1haW5pbmcgPSBleGNoYW5nZVN0YXRzID8gZXhjaGFuZ2VTdGF0c1sxXSA6IEJpZ0ludCgwKTtcbiAgY29uc3QgdG90YWxCbmJSYWlzZWQgPSBleGNoYW5nZVN0YXRzID8gZXhjaGFuZ2VTdGF0c1syXSA6IEJpZ0ludCgwKTtcbiAgY29uc3QgY3VycmVudFByaWNlID0gZXhjaGFuZ2VTdGF0cyA/IGV4Y2hhbmdlU3RhdHNbM10gOiBCaWdJbnQoMCk7XG4gIGNvbnN0IG5leHRSb3VuZFByaWNlID0gZXhjaGFuZ2VTdGF0cyA/IGV4Y2hhbmdlU3RhdHNbNF0gOiBCaWdJbnQoMCk7XG5cbiAgLy8g6I635Y+W55So5oi35pWw5o2uXG4gIGNvbnN0IHsgXG4gICAgZGF0YTogdXNlckRhdGEsIFxuICAgIHJlZmV0Y2g6IHJlZmV0Y2hVc2VyRGF0YSxcbiAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ1VzZXJEYXRhLFxuICAgIGVycm9yOiB1c2VyRGF0YUVycm9yXG4gIH0gPSB1c2VDb250cmFjdFJlYWQoe1xuICAgIGFkZHJlc3M6IENPTlRSQUNUX0FERFJFU1NFUy5leGNoYW5nZSBhcyBgMHgke3N0cmluZ31gLFxuICAgIGFiaTogU01fRVhDSEFOR0VfQUJJLFxuICAgIGZ1bmN0aW9uTmFtZTogJ3VzZXJEYXRhJyxcbiAgICBhcmdzOiBhZGRyZXNzID8gW2FkZHJlc3NdIDogdW5kZWZpbmVkLFxuICAgIGVuYWJsZWQ6IGlzQ29ubmVjdGVkICYmICEhYWRkcmVzcyxcbiAgfSk7XG5cbiAgLy8g6Kej5p6Q55So5oi35pWw5o2uXG4gIGNvbnN0IHRvdGFsUHVyY2hhc2VzID0gdXNlckRhdGEgPyB1c2VyRGF0YVswXSA6IEJpZ0ludCgwKTtcbiAgY29uc3QgaXNWZXJpZmllZCA9IHVzZXJEYXRhID8gdXNlckRhdGFbMV0gOiBmYWxzZTtcbiAgY29uc3QgbGFzdFB1cmNoYXNlVGltZSA9IHVzZXJEYXRhID8gTnVtYmVyKHVzZXJEYXRhWzJdKSA6IDA7XG4gIGNvbnN0IGhhc1JlZnVuZFJlcXVlc3QgPSB1c2VyRGF0YSA/IHVzZXJEYXRhWzNdIDogZmFsc2U7XG5cbiAgLy8g5YWR5o2i5Luj5biB5Ye95pWwXG4gIGNvbnN0IHsgXG4gICAgZGF0YTogZXhjaGFuZ2VEYXRhLFxuICAgIHdyaXRlOiBleGNoYW5nZVRva2VucyxcbiAgICBpc0xvYWRpbmc6IGlzRXhjaGFuZ2luZyxcbiAgICBpc1N1Y2Nlc3M6IGlzRXhjaGFuZ2VTdWNjZXNzLFxuICAgIGVycm9yOiBleGNoYW5nZUVycm9yXG4gIH0gPSB1c2VDb250cmFjdFdyaXRlKHtcbiAgICBhZGRyZXNzOiBDT05UUkFDVF9BRERSRVNTRVMuZXhjaGFuZ2UgYXMgYDB4JHtzdHJpbmd9YCxcbiAgICBhYmk6IFNNX0VYQ0hBTkdFX0FCSSxcbiAgICBmdW5jdGlvbk5hbWU6ICdleGNoYW5nZVRva2VucycsXG4gIH0pO1xuXG4gIC8vIOetieW+heWFkeaNouS6pOaYk+ehruiupFxuICBjb25zdCB7IFxuICAgIGlzTG9hZGluZzogaXNFeGNoYW5nZVBlbmRpbmcsXG4gICAgaXNTdWNjZXNzOiBpc0V4Y2hhbmdlQ29uZmlybWVkXG4gIH0gPSB1c2VXYWl0Rm9yVHJhbnNhY3Rpb24oe1xuICAgIGhhc2g6IGV4Y2hhbmdlRGF0YT8uaGFzaCxcbiAgfSk7XG5cbiAgLy8g6K6h566XQk5C5Y+v6I635b6X55qE5Luj5biB5pWw6YePXG4gIGNvbnN0IGNhbGN1bGF0ZVRva2VuQW1vdW50ID0gKGJuYkFtb3VudDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFibmJBbW91bnQgfHwgIWN1cnJlbnRQcmljZSB8fCBCaWdJbnQoY3VycmVudFByaWNlKSA9PT0gQmlnSW50KDApKSB7XG4gICAgICByZXR1cm4gJzAnO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgYm5iVmFsdWUgPSBwYXJzZUV0aGVyKGJuYkFtb3VudCk7XG4gICAgICBjb25zdCB0b2tlbkFtb3VudCA9IGJuYlZhbHVlICogQmlnSW50KDEwKioxOCkgLyBjdXJyZW50UHJpY2U7XG4gICAgICByZXR1cm4gKE51bWJlcih0b2tlbkFtb3VudCkgLyAxMCoqMTgpLnRvRml4ZWQoMik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+iuoeeul+S7o+W4geaVsOmHj+mUmeivrzonLCBlcnJvcik7XG4gICAgICByZXR1cm4gJzAnO1xuICAgIH1cbiAgfTtcblxuICAvLyDmiafooYzlhZHmjaLku6PluIFcbiAgY29uc3QgcGVyZm9ybUV4Y2hhbmdlID0gYXN5bmMgKGJuYkFtb3VudDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFibmJBbW91bnQpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgZXhjaGFuZ2VUb2tlbnMoe1xuICAgICAgICB2YWx1ZTogcGFyc2VFdGhlcihibmJBbW91bnQpLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign5YWR5o2i5Luj5biB6ZSZ6K+vOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICAvLyDkuqTmmJPmiYDnirbmgIFcbiAgICB0b3RhbFRva2Vuc1NvbGQsXG4gICAgdG90YWxUb2tlbnNSZW1haW5pbmcsXG4gICAgdG90YWxCbmJSYWlzZWQsXG4gICAgY3VycmVudFByaWNlLFxuICAgIG5leHRSb3VuZFByaWNlLFxuICAgIHJlZmV0Y2hFeGNoYW5nZVN0YXRzLFxuICAgIGlzTG9hZGluZ1N0YXRzLFxuICAgIHN0YXRzRXJyb3IsXG4gICAgXG4gICAgLy8g55So5oi35pWw5o2uXG4gICAgdG90YWxQdXJjaGFzZXMsXG4gICAgaXNWZXJpZmllZCxcbiAgICBsYXN0UHVyY2hhc2VUaW1lLFxuICAgIGhhc1JlZnVuZFJlcXVlc3QsXG4gICAgcmVmZXRjaFVzZXJEYXRhLFxuICAgIGlzTG9hZGluZ1VzZXJEYXRhLFxuICAgIHVzZXJEYXRhRXJyb3IsXG4gICAgXG4gICAgLy8g5YWR5o2i5Yqf6IO9XG4gICAgZXhjaGFuZ2VUb2tlbnM6IHBlcmZvcm1FeGNoYW5nZSxcbiAgICBpc0V4Y2hhbmdpbmc6IGlzRXhjaGFuZ2luZyB8fCBpc0V4Y2hhbmdlUGVuZGluZyxcbiAgICBpc0V4Y2hhbmdlU3VjY2VzczogaXNFeGNoYW5nZVN1Y2Nlc3MgJiYgaXNFeGNoYW5nZUNvbmZpcm1lZCxcbiAgICBleGNoYW5nZUVycm9yLFxuICAgIGV4Y2hhbmdlVHhIYXNoOiBleGNoYW5nZURhdGE/Lmhhc2gsXG4gICAgXG4gICAgLy8g5bel5YW35Ye95pWwXG4gICAgY2FsY3VsYXRlVG9rZW5BbW91bnQsXG4gICAgXG4gICAgLy8g6L+e5o6l54q25oCBXG4gICAgaXNDb25uZWN0ZWQsXG4gICAgYWRkcmVzc1xuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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