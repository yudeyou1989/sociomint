{"version":3,"names":["ExchangeSection","props","cov_1lhi54soxu","b","f","stats","onExchange","isLoading","externalLoading","className","otherProps","s","wallet","updateBalances","_WalletContext","useWallet","inputAmount","setInputAmount","_react","useState","outputAmount","setOutputAmount","exchangeRate","setExchangeRate","isProcessing","setIsProcessing","useEffect","fetchExchangeRate","Promise","resolve","setTimeout","rate","Math","floor","random","error","console","interval","setInterval","document","visibilityState","clearInterval","calculateOutput","input","isNaN","Number","bnbAmount","parseFloat","smAmount","toFixed","handleInputChange","e","value","target","_security","InputValidator","validateNumber","numValue","validateRange","SecurityConfig","numberLimits","minAmount","maxAmount","handleExchange","isConnected","alert","currentBnbBalance","balance","bnb","handleMaxAmount","bnbBalance","max","_jsxruntime","jsxs","jsx","_fa","FaExchangeAlt","onClick","type","onChange","placeholder","disabled","sm","readOnly","FaGasPump","Fragment"],"sources":["/Users/yudeyou/Desktop/sm/sociomint/src/components/home/ExchangeSection.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { FaExchangeAlt, FaGasPump } from 'react-icons/fa';\nimport { useWallet } from '@/contexts/WalletContext';\nimport { InputValidator, SecurityConfig } from '@/lib/security';\nimport { ExchangeSectionProps } from '@/types/components';\n\nexport default function ExchangeSection(props: Partial<ExchangeSectionProps> = {}) {\n  const { stats, onExchange, isLoading: externalLoading, className, ...otherProps } = props;\n  const { wallet, updateBalances } = useWallet();\n\n  // 输入值\n  const [inputAmount, setInputAmount] = useState<string>('');\n  // 输出值\n  const [outputAmount, setOutputAmount] = useState<string>('0');\n  // 模拟汇率 (1 BNB = ? SM)\n  const [exchangeRate, setExchangeRate] = useState<number>(1200);\n  // 处理状态\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n\n  // 模拟获取汇率\n  useEffect(() => {\n    // 在实际应用中，这里应该从预言机或API获取实时汇率\n    const fetchExchangeRate = async () => {\n      try {\n        // 模拟API请求延迟\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        // 随机生成1100-1300之间的汇率\n        const rate = 1100 + Math.floor(Math.random() * 200);\n        setExchangeRate(rate);\n      } catch (error) {\n        console.error('获取汇率失败:', error);\n      }\n    };\n\n    fetchExchangeRate();\n    // 减少更新频率，避免性能问题\n    const interval = setInterval(() => {\n      if (document.visibilityState === 'visible') {\n        fetchExchangeRate();\n      }\n    }, 120000); // 从30秒改为2分钟更新一次\n\n    return () => clearInterval(interval as NodeJS.Timeout);\n  }, []);\n\n  // 根据输入计算输出\n  const calculateOutput = (input: string) => {\n    if (!input || isNaN(Number(input))) {\n      return '0';\n    }\n\n    const bnbAmount = parseFloat(input);\n    const smAmount = bnbAmount * exchangeRate;\n\n    return smAmount.toFixed(2);\n  };\n\n  // 处理输入变化\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n\n    // 使用安全的输入验证\n    if (value === '' || InputValidator.validateNumber(value)) {\n      // 检查数值范围\n      const numValue = parseFloat(value);\n      if (value !== '' && !InputValidator.validateRange(numValue, SecurityConfig.numberLimits.minAmount, SecurityConfig.numberLimits.maxAmount)) {\n        return; // 超出范围，不更新\n      }\n\n      setInputAmount(value);\n      setOutputAmount(calculateOutput(value));\n    }\n  };\n\n  // 处理兑换操作\n  const handleExchange = async () => {\n    if (!wallet.isConnected) {\n      alert('请先连接钱包');\n      return;\n    }\n\n    if (!inputAmount || parseFloat(inputAmount) <= 0) {\n      alert('请输入有效的BNB数量');\n      return;\n    }\n\n    const bnbAmount = parseFloat(inputAmount);\n    const currentBnbBalance = wallet.balance ? parseFloat(wallet.balance.bnb) : 0;\n    if (bnbAmount > currentBnbBalance) {\n      alert('BNB余额不足');\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      // 在实际应用中，这里应该调用智能合约进行实际兑换\n      // 模拟交易延迟\n      await new Promise((resolve) => setTimeout(resolve, 2000));\n\n      // 计算SM数量\n      const smAmount = bnbAmount * exchangeRate;\n\n      // 更新余额 - 调用钱包服务重新获取余额\n      await updateBalances();\n\n      // 重置表单\n      setInputAmount('');\n      setOutputAmount('0');\n\n      // 显示成功消息\n      alert(\n        `兑换成功！您已将 ${bnbAmount} BNB 兑换为 ${smAmount.toFixed(2)} SM`,\n      );\n    } catch (error) {\n      console.error('兑换失败:', error);\n      alert('兑换失败，请稍后重试');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // 最大可兑换金额\n  const handleMaxAmount = () => {\n    if (wallet.isConnected && wallet.balance) {\n      const bnbBalance = parseFloat(wallet.balance.bnb);\n      if (bnbBalance > 0) {\n        // 保留4位小数\n        const maxAmount = Math.max(0, bnbBalance).toFixed(4);\n        setInputAmount(maxAmount);\n        setOutputAmount(calculateOutput(maxAmount));\n      }\n    }\n  };\n\n  return (\n    <div className={`glass-card p-6 ${className || ''}`} {...otherProps}>\n      <h2 className=\"text-2xl font-bold mb-6\">BNB兑换SM</h2>\n\n      {/* 汇率显示 */}\n      <div className=\"flex items-center justify-between mb-6 p-3 bg-black/30 rounded-lg border border-gray-800\">\n        <div className=\"flex items-center gap-2\">\n          <FaExchangeAlt className=\"text-primary\" />\n          <span className=\"text-sm text-gray-300\">当前汇率</span>\n        </div>\n        <div className=\"font-medium\">\n          1 BNB = <span className=\"text-primary\">{exchangeRate}</span> SM\n        </div>\n      </div>\n\n      {/* 兑换表单 */}\n      <div className=\"space-y-4\">\n        {/* 输入框 - BNB */}\n        <div className=\"bg-black/40 p-4 rounded-lg border border-gray-800\">\n          <div className=\"flex justify-between mb-2\">\n            <label className=\"text-sm text-gray-400\">从</label>\n            {wallet.isConnected && wallet.balance && (\n              <div className=\"text-xs text-gray-400\">\n                余额: {parseFloat(wallet.balance.bnb).toFixed(4)} BNB\n                <button\n                  onClick={handleMaxAmount}\n                  className=\"ml-2 text-primary text-xs hover:underline\"\n                >\n                  最大\n                </button>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              type=\"text\"\n              value={inputAmount}\n              onChange={handleInputChange}\n              placeholder=\"0.0\"\n              className=\"bg-transparent text-white text-xl w-full focus:outline-none\"\n              disabled={isProcessing}\n            />\n            <div className=\"flex items-center gap-2 font-medium\">\n              <div className=\"w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center text-xs font-bold text-black\">\n                B\n              </div>\n              BNB\n            </div>\n          </div>\n        </div>\n\n        {/* 输出框 - SM */}\n        <div className=\"bg-black/40 p-4 rounded-lg border border-gray-800\">\n          <div className=\"flex justify-between mb-2\">\n            <label className=\"text-sm text-gray-400\">至</label>\n            {wallet.isConnected && wallet.balance && wallet.balance.sm && (\n              <div className=\"text-xs text-gray-400\">\n                余额: {parseFloat(wallet.balance.sm).toFixed(2)} SM\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center\">\n            <input\n              type=\"text\"\n              value={outputAmount}\n              readOnly\n              className=\"bg-transparent text-white text-xl w-full focus:outline-none\"\n            />\n            <div className=\"flex items-center gap-2 font-medium\">\n              <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-xs font-bold text-white\">\n                SM\n              </div>\n              SM\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Gas费提示 */}\n      <div className=\"flex items-center gap-2 mt-4 mb-6 text-sm text-gray-400\">\n        <FaGasPump className=\"text-yellow-500\" />\n        <span>您需要支付少量BNB作为Gas费用</span>\n      </div>\n\n      {/* 兑换按钮 */}\n      <button\n        onClick={handleExchange}\n        disabled={\n          isProcessing ||\n          !wallet.isConnected ||\n          !inputAmount ||\n          parseFloat(inputAmount) <= 0\n        }\n        className={`w-full py-3 px-4 rounded-md flex items-center justify-center gap-2 ${\n          isProcessing ||\n          !wallet.isConnected ||\n          !inputAmount ||\n          parseFloat(inputAmount) <= 0\n            ? 'bg-gray-700 text-gray-400 cursor-not-allowed'\n            : 'neon-button'\n        }`}\n      >\n        {isProcessing ? (\n          <>\n            <div className=\"w-5 h-5 border-2 border-t-transparent border-white rounded-full animate-spin\"></div>\n            处理中...\n          </>\n        ) : (\n          '兑换'\n        )}\n      </button>\n\n      {!wallet.isConnected && (\n        <div className=\"mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-yellow-400\">\n          <p>请先连接钱包以使用兑换功能</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}